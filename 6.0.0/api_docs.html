<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API Reference &#8212; kraken  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=89a84cc7" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="kraken.re/api_docs.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Training" href="training/ketos.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h1>
<section id="segmentation">
<h2>Segmentation<a class="headerlink" href="#segmentation" title="Link to this heading">¶</a></h2>
<section id="kraken-blla-module">
<h3>kraken.blla module<a class="headerlink" href="#kraken-blla-module" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>blla</cite> provides the interface to the fully trainable segmenter. For the
legacy segmenter interface refer to the <cite>pageseg</cite> module. Note that
recognition models are not interchangeable between segmenters.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="kraken.blla.segment">
<span class="sig-prename descclassname"><span class="pre">kraken.blla.</span></span><span class="sig-name descname"><span class="pre">segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'horizontal-lr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reading_order_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">polygonal_reading_order</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.blla.segment" title="Link to this definition">¶</a></dt>
<dd><p>Segments a page into text lines using the baseline segmenter.</p>
<p>Segments a page into text lines and returns the polyline formed by each
baseline and their estimated environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>PIL.Image.Image</em>) – Input image. The mode can generally be anything but it is possible
to supply a binarized-input-only model which requires accordingly
treated images.</p></li>
<li><p><strong>text_direction</strong> (<em>Literal</em><em>[</em><em>'horizontal-lr'</em><em>, </em><em>'horizontal-rl'</em><em>, </em><em>'vertical-lr'</em><em>, </em><em>'vertical-rl'</em><em>]</em>) – Determines principal text direction for heuristic
reading order determination and fallback value for line
orientation in case of low model confidence.
Passed-through value for Segmentation container class.</p></li>
<li><p><strong>mask</strong> (<em>Optional</em><em>[</em><em>numpy.ndarray</em><em>]</em>) – A bi-level mask image of the same size as <cite>im</cite> where 0-valued
regions are ignored for segmentation purposes. Disables column
detection.</p></li>
<li><p><strong>reading_order_fn</strong> (<em>Callable</em>) – Function to determine the reading order.  Has to
accept a list of tuples (baselines, polygon) and a
text direction (<cite>lr</cite> or <cite>rl</cite>).</p></li>
<li><p><strong>model</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel" title="kraken.lib.vgsl.TorchVGSLModel"><em>kraken.lib.vgsl.TorchVGSLModel</em></a><em>]</em><em>, </em><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel" title="kraken.lib.vgsl.TorchVGSLModel"><em>kraken.lib.vgsl.TorchVGSLModel</em></a><em>]</em>) – One or more TorchVGSLModel containing a segmentation model. If
none is given a default model will be loaded.</p></li>
<li><p><strong>device</strong> (<em>str</em>) – The target device to run the neural network on.</p></li>
<li><p><strong>raise_on_error</strong> (<em>bool</em>) – Raises error instead of logging them when they are
not-blocking</p></li>
<li><p><strong>autocast</strong> (<em>bool</em>) – Runs the model with automatic mixed precision</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.containers.Segmentation</span></code></a> class containing reading
order sorted baselines (polylines) and their respective polygonal
boundaries as <a class="reference internal" href="#kraken.containers.BaselineLine" title="kraken.containers.BaselineLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.containers.BaselineLine</span></code></a> records. The
last and first point of each boundary polygon are connected.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenInvalidModelException" title="kraken.lib.exceptions.KrakenInvalidModelException"><strong>KrakenInvalidModelException</strong></a> – if the given model is not a valid
segmentation model.</p></li>
<li><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenInputException" title="kraken.lib.exceptions.KrakenInputException"><strong>KrakenInputException</strong></a> – if the mask is not bitonal or does not match the
image size.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation">kraken.containers.Segmentation</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Multi-model operation is most useful for combining one or more region
detection models and one text line model. Detected lines from all
models are simply combined without any merging or duplicate detection
so the chance of the same line appearing multiple times in the output
are high. In addition, neural reading order determination is disabled
when more than one model outputs lines.</p>
</dd></dl>

</section>
<section id="kraken-pageseg-module">
<h3>kraken.pageseg module<a class="headerlink" href="#kraken-pageseg-module" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>pageseg</cite> is the legacy bounding box-based segmenter. For the trainable
baseline segmenter interface refer to the <cite>blla</cite> module. Note that
recognition models are not interchangeable between segmenters.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="kraken.pageseg.segment">
<span class="sig-prename descclassname"><span class="pre">kraken.pageseg.</span></span><span class="sig-name descname"><span class="pre">segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'horizontal-lr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcolseps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_colseps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_hlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reading_order_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">reading_order</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.pageseg.segment" title="Link to this definition">¶</a></dt>
<dd><p>Segments a page into text lines.</p>
<p>Segments a page into text lines and returns the absolute coordinates of
each line in reading order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>PIL.Image.Image</em>) – A bi-level page of mode ‘1’ or ‘L’</p></li>
<li><p><strong>text_direction</strong> (<em>str</em>) – Determines principal text direction for heuristic
reading order determination and value for line
orientation. Passed-through value for Segmentation
container class.</p></li>
<li><p><strong>scale</strong> (<em>Optional</em><em>[</em><em>float</em><em>]</em>) – Scale of the image. Will be auto-determined if set to <cite>None</cite>.</p></li>
<li><p><strong>maxcolseps</strong> (<em>float</em>) – Maximum number of whitespace column separators</p></li>
<li><p><strong>black_colseps</strong> (<em>bool</em>) – Whether column separators are assumed to be vertical
black lines or not</p></li>
<li><p><strong>no_hlines</strong> (<em>bool</em>) – Switch for small horizontal line removal.</p></li>
<li><p><strong>pad</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>) – Padding to add to line bounding boxes. If int the same padding is
used both left and right. If a 2-tuple, uses (padding_left,
padding_right).</p></li>
<li><p><strong>mask</strong> (<em>Optional</em><em>[</em><em>numpy.ndarray</em><em>]</em>) – A bi-level mask image of the same size as <cite>im</cite> where 0-valued
regions are ignored for segmentation purposes. Disables column
detection.</p></li>
<li><p><strong>reading_order_fn</strong> (<em>Callable</em>) – Function to call to order line output. Callable
accepting a list of slices (y, x) and a text
direction in (<cite>rl</cite>, <cite>lr</cite>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.containers.Segmentation</span></code></a> class containing reading
order sorted bounding box-type lines as
<a class="reference internal" href="#kraken.containers.BBoxLine" title="kraken.containers.BBoxLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.containers.BBoxLine</span></code></a> records.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenInputException" title="kraken.lib.exceptions.KrakenInputException"><strong>KrakenInputException</strong></a> – if the input image is not binarized or the text
direction is invalid.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation">kraken.containers.Segmentation</a></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="recognition">
<h2>Recognition<a class="headerlink" href="#recognition" title="Link to this heading">¶</a></h2>
<section id="kraken-rpred-module">
<h3>kraken.rpred module<a class="headerlink" href="#kraken-rpred-module" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.rpred.</span></span><span class="sig-name descname"><span class="pre">mm_rpred</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bidi_reordering</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_legacy_polygons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.rpred.mm_rpred" title="Link to this definition">¶</a></dt>
<dd><p>Multi-model version of kraken.rpred.rpred</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nets</strong> (<em>Dict</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer" title="kraken.lib.models.TorchSeqRecognizer"><em>kraken.lib.models.TorchSeqRecognizer</em></a><em>]</em>)</p></li>
<li><p><strong>im</strong> (<em>PIL.Image.Image</em>)</p></li>
<li><p><strong>bounds</strong> (<a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a>)</p></li>
<li><p><strong>pad</strong> (<em>int</em>)</p></li>
<li><p><strong>bidi_reordering</strong> (<em>Union</em><em>[</em><em>bool</em><em>, </em><em>str</em><em>]</em>)</p></li>
<li><p><strong>tags_ignore</strong> (<em>Optional</em><em>[</em><em>list</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>no_legacy_polygons</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.bidi_reordering">
<span class="sig-name descname"><span class="pre">bidi_reordering</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#kraken.rpred.mm_rpred.bidi_reordering" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.bounds">
<span class="sig-name descname"><span class="pre">bounds</span></span><a class="headerlink" href="#kraken.rpred.mm_rpred.bounds" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.im">
<span class="sig-name descname"><span class="pre">im</span></span><a class="headerlink" href="#kraken.rpred.mm_rpred.im" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.len">
<span class="sig-name descname"><span class="pre">len</span></span><a class="headerlink" href="#kraken.rpred.mm_rpred.len" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.line_iter">
<span class="sig-name descname"><span class="pre">line_iter</span></span><a class="headerlink" href="#kraken.rpred.mm_rpred.line_iter" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.nets">
<span class="sig-name descname"><span class="pre">nets</span></span><a class="headerlink" href="#kraken.rpred.mm_rpred.nets" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.no_legacy_polygons">
<span class="sig-name descname"><span class="pre">no_legacy_polygons</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#kraken.rpred.mm_rpred.no_legacy_polygons" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.pad">
<span class="sig-name descname"><span class="pre">pad</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">16</span></em><a class="headerlink" href="#kraken.rpred.mm_rpred.pad" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.rpred.mm_rpred.tags_ignore">
<span class="sig-name descname"><span class="pre">tags_ignore</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.rpred.mm_rpred.tags_ignore" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.rpred.rpred">
<span class="sig-prename descclassname"><span class="pre">kraken.rpred.</span></span><span class="sig-name descname"><span class="pre">rpred</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bidi_reordering</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_legacy_polygons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.rpred.rpred" title="Link to this definition">¶</a></dt>
<dd><p>Uses a TorchSeqRecognizer and a segmentation to recognize text</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer" title="kraken.lib.models.TorchSeqRecognizer"><em>kraken.lib.models.TorchSeqRecognizer</em></a>) – A TorchSegRecognizer object</p></li>
<li><p><strong>im</strong> (<em>PIL.Image.Image</em>) – Image to extract text from</p></li>
<li><p><strong>bounds</strong> (<a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a>) – A Segmentation class instance containing either a baseline or
bbox segmentation.</p></li>
<li><p><strong>pad</strong> (<em>int</em>) – Extra blank padding to the left and right of text line.
Auto-disabled when expected network inputs are incompatible with
padding.</p></li>
<li><p><strong>bidi_reordering</strong> (<em>Union</em><em>[</em><em>bool</em><em>, </em><em>str</em><em>]</em>) – Reorder classes in the ocr_record according to the
Unicode bidirectional algorithm for correct display.
Set to L|R to change base text direction.</p></li>
<li><p><strong>no_legacy_polygons</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>An ocr_record containing the recognized text, absolute character
positions, and confidence values for each character.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Generator[<a class="reference internal" href="#kraken.containers.ocr_record" title="kraken.containers.ocr_record">kraken.containers.ocr_record</a>, None, None]</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="serialization">
<h2>Serialization<a class="headerlink" href="#serialization" title="Link to this heading">¶</a></h2>
<section id="kraken-serialization-module">
<h3>kraken.serialization module<a class="headerlink" href="#kraken-serialization-module" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="kraken.serialization.render_report">
<span class="sig-prename descclassname"><span class="pre">kraken.serialization.</span></span><span class="sig-name descname"><span class="pre">render_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">char_accuracy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">char_CI_accucary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">word_accuracy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">char_confusions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scripts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insertions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deletions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitutions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.serialization.render_report" title="Link to this definition">¶</a></dt>
<dd><p>Renders an accuracy report.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>str</em>) – Model name.</p></li>
<li><p><strong>errors</strong> (<em>int</em>) – Number of errors on test set.</p></li>
<li><p><strong>char_confusions</strong> (<em>dict</em>) – Dictionary mapping a tuple (gt, pred) to a
number of occurrences.</p></li>
<li><p><strong>scripts</strong> (<em>dict</em>) – Dictionary counting character per script.</p></li>
<li><p><strong>insertions</strong> (<em>dict</em>) – Dictionary counting insertion operations per Unicode
script</p></li>
<li><p><strong>deletions</strong> (<em>int</em>) – Number of deletions</p></li>
<li><p><strong>substitutions</strong> (<em>dict</em>) – Dictionary counting substitution operations per
Unicode script.</p></li>
<li><p><strong>chars</strong> (<em>int</em>)</p></li>
<li><p><strong>char_accuracy</strong> (<em>float</em>)</p></li>
<li><p><strong>char_CI_accucary</strong> (<em>float</em>)</p></li>
<li><p><strong>word_accuracy</strong> (<em>float</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string containing the rendered report.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.serialization.serialize">
<span class="sig-prename descclassname"><span class="pre">kraken.serialization.</span></span><span class="sig-name descname"><span class="pre">serialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writing_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'horizontal-tb'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scripts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'alto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'native'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processing_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_line_segmentation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.serialization.serialize" title="Link to this definition">¶</a></dt>
<dd><p>Serializes recognition and segmentation results into an output document.</p>
<p>Serializes a Segmentation container object containing either segmentation
or recognition results into an output document. The rendering is performed
with jinja2 templates that can either be shipped with kraken
(<cite>template_source</cite> == ‘native’) or custom (<cite>template_source</cite> == ‘custom’).</p>
<p>Note: Empty records are ignored for serialization purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segmentation</strong> – Segmentation container object</p></li>
<li><p><strong>image_size</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – Dimensions of the source image</p></li>
<li><p><strong>writing_mode</strong> (<em>Literal</em><em>[</em><em>'horizontal-tb'</em><em>, </em><em>'vertical-lr'</em><em>, </em><em>'vertical-rl'</em><em>]</em>) – Sets the principal layout of lines and the
direction in which blocks progress. Valid values are
horizontal-tb, vertical-rl, and vertical-lr.</p></li>
<li><p><strong>scripts</strong> (<em>Optional</em><em>[</em><em>Iterable</em><em>[</em><em>str</em><em>]</em><em>]</em>) – List of scripts contained in the OCR records</p></li>
<li><p><strong>template</strong> (<em>[</em><em>os.PathLike</em><em>, </em><em>str</em><em>]</em>) – Selector for the serialization format. May be ‘hocr’,
‘alto’, ‘page’ or any template found in the template
directory. If template_source is set to <cite>custom</cite> a path to a
template is expected.</p></li>
<li><p><strong>template_source</strong> (<em>Literal</em><em>[</em><em>'native'</em><em>, </em><em>'custom'</em><em>]</em>) – Switch to enable loading of custom templates from
outside the kraken package.</p></li>
<li><p><strong>processing_steps</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference internal" href="#kraken.containers.ProcessingStep" title="kraken.containers.ProcessingStep"><em>kraken.containers.ProcessingStep</em></a><em>]</em><em>]</em>) – A list of ProcessingStep container classes describing
the processing kraken performed on the inputs.</p></li>
<li><p><strong>sub_line_segmentation</strong> (<em>bool</em>) – Switch to enable the computation of subline
segmentation (char/word). Records the
transcription in line[“text”] if set to false</p></li>
<li><p><strong>results</strong> (<a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The rendered template</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="default-templates">
<h3>Default templates<a class="headerlink" href="#default-templates" title="Link to this heading">¶</a></h3>
<section id="alto-4-4">
<span id="templates"></span><h4>ALTO 4.4<a class="headerlink" href="#alto-4-4" title="Link to this heading">¶</a></h4>
<div class="highlight-xml+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">proc_type_table</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;processing&#39;</span><span class="o">:</span> <span class="s1">&#39;contentGeneration&#39;</span><span class="o">,</span>
              <span class="s1">&#39;preprocessing&#39;</span><span class="o">:</span> <span class="s1">&#39;preOperation&#39;</span><span class="o">,</span>
              <span class="s1">&#39;postprocessing&#39;</span><span class="o">:</span> <span class="s1">&#39;postOperation&#39;</span><span class="o">}</span>
<span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">ws_join</span> <span class="o">=</span> <span class="nv">joiner</span><span class="o">(</span><span class="s2">&quot; &quot;</span><span class="o">)</span> <span class="cp">%}</span>
{%+<span class="w"> </span>macro<span class="w"> </span>render_line(page,<span class="w"> </span>line)<span class="w"> </span>+%}
<span class="w">                    </span><span class="nt">&lt;TextLine</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.baseline</span> <span class="cp">%}</span><span class="w"> </span><span class="na">BASELINE=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.baseline</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.tags</span> <span class="cp">%}</span><span class="w"> </span><span class="na">TAGREFS=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">types</span> <span class="o">=</span> <span class="o">[]</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">type</span> <span class="k">in</span> <span class="nv">line.tags</span> <span class="cp">%}{%</span> <span class="k">set</span> <span class="nv">outer_loop</span> <span class="o">=</span> <span class="nb">loop</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">tag_val</span> <span class="k">in</span> <span class="nv">line.tags</span><span class="o">[</span><span class="nv">type</span><span class="o">]</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">tag_val</span><span class="o">[</span><span class="s2">&quot;type&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="nv">label</span> -<span class="cp">%}{%</span> <span class="k">set</span> <span class="kp">_</span> <span class="o">=</span> <span class="nv">types.append</span><span class="o">(</span><span class="s1">&#39;TYPE_&#39;</span> <span class="o">~</span> <span class="nv">outer_loop.index</span><span class="o">)</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{{</span> <span class="nv">types</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.base_dir</span> <span class="cp">%}</span><span class="w"> </span><span class="na">BASEDIRECTION=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">{</span><span class="s2">&quot;L&quot;</span><span class="o">:</span> <span class="s2">&quot;rtl&quot;</span><span class="o">,</span> <span class="s2">&quot;R&quot;</span><span class="o">:</span> <span class="s2">&quot;rtl&quot;</span><span class="o">}[</span><span class="nv">line.base_dir</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.boundary</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                            </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.text</span> <span class="k">is</span> <span class="nf">string</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">line.text</span><span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.recognition</span><span class="o">|</span><span class="nf">length</span><span class="o">()</span> <span class="o">==</span> <span class="m">0</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">segment</span> <span class="k">in</span> <span class="nv">line.recognition</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="c">{# ALTO forbids encoding whitespace before any String/Shape tags #}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">segment.text</span> <span class="k">is</span> <span class="nf">whitespace</span> <span class="k">and</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="o">&gt;</span> <span class="m">1</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;SP</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;segment_</span><span class="cp">{{</span> <span class="nv">segment.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="cp">}}</span><span class="s">&quot;</span><span class="w">  </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w">  </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;segment_</span><span class="cp">{{</span> <span class="nv">segment.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.text</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WC=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">(</span><span class="nv">segment.confidences</span><span class="o">|</span><span class="nf">sum</span> <span class="o">/</span> <span class="nv">segment.confidences</span><span class="o">|</span><span class="nf">length</span><span class="o">)|</span><span class="nf">round</span><span class="o">(</span><span class="m">4</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">segment.boundary</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                                </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                            </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">char</span> <span class="k">in</span> <span class="nv">segment.recognition</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;Glyph</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;char_</span><span class="cp">{{</span> <span class="nv">char.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.text</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">GC=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.confidence</span><span class="o">|</span><span class="nf">round</span><span class="o">(</span><span class="m">4</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">char.boundary</span> <span class="cp">%}</span>
<span class="w">                                </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                                    </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;/Glyph&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;/String&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="nt">&lt;/TextLine&gt;</span>
{%+<span class="w"> </span>endmacro<span class="w"> </span>%}
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;alto</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="w">    </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/standards/alto/ns-v4#&quot;</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.loc.gov/standards/alto/ns-v4# http://www.loc.gov/standards/alto/v4/alto-4-3.xsd&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Description&gt;</span>
<span class="w">        </span><span class="nt">&lt;MeasurementUnit&gt;</span>pixel<span class="nt">&lt;/MeasurementUnit&gt;</span>
<span class="w">        </span><span class="nt">&lt;sourceImageInformation&gt;</span>
<span class="w">            </span><span class="nt">&lt;fileName&gt;</span><span class="cp">{{</span> <span class="nv">page.name</span> <span class="cp">}}</span><span class="nt">&lt;/fileName&gt;</span>
<span class="w">        </span><span class="nt">&lt;/sourceImageInformation&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">metadata.processing_steps</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">step</span> <span class="k">in</span> <span class="nv">metadata.processing_steps</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;Processing</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;OCR_</span><span class="cp">{{</span> <span class="nv">step.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingCategory&gt;</span><span class="cp">{{</span> <span class="nv">proc_type_table</span><span class="o">[</span><span class="nv">step.category</span><span class="o">]</span> <span class="cp">}}</span><span class="nt">&lt;/processingCategory&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepDescription&gt;</span><span class="cp">{{</span> <span class="nv">step.description</span> <span class="cp">}}</span><span class="nt">&lt;/processingStepDescription&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepSettings&gt;</span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">k</span><span class="o">,</span> <span class="nv">v</span> <span class="k">in</span> <span class="nv">step.settings.items</span><span class="o">()</span> <span class="cp">%}{{</span><span class="nv">k</span><span class="cp">}}</span>:<span class="w"> </span><span class="cp">{{</span><span class="nv">v</span><span class="cp">}}{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>;<span class="w"> </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="nt">&lt;/processingStepSettings&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingSoftware&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareName&gt;</span>kraken<span class="nt">&lt;/softwareName&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareVersion&gt;</span><span class="cp">{{</span> <span class="nv">metadata.version</span> <span class="cp">}}</span><span class="nt">&lt;/softwareVersion&gt;</span>
<span class="w">            </span><span class="nt">&lt;/processingSoftware&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Processing&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;Processing</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;OCR_0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingCategory&gt;</span>other<span class="nt">&lt;/processingCategory&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepDescription&gt;</span>unknown<span class="nt">&lt;/processingStepDescription&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingSoftware&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareName&gt;</span>kraken<span class="nt">&lt;/softwareName&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareVersion&gt;</span><span class="cp">{{</span> <span class="nv">metadata.version</span> <span class="cp">}}</span><span class="nt">&lt;/softwareVersion&gt;</span>
<span class="w">            </span><span class="nt">&lt;/processingSoftware&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Processing&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/Description&gt;</span>
<span class="w">    </span><span class="nt">&lt;Tags&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;OtherTag</span><span class="w"> </span><span class="na">DESCRIPTION=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;TYPE_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">TYPE=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">LABEL=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">label</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/Tags&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">page.line_orders</span><span class="o">|</span><span class="nf">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;ReadingOrder&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">page.line_orders</span> <span class="o">|</span> <span class="nf">length</span> <span class="o">==</span> <span class="m">1</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;OrderedGroup</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;ro_0&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">id</span> <span class="k">in</span> <span class="nv">page.line_orders</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;ElementRef</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;o_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">REF=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;/OrderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;UnorderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">ro</span> <span class="k">in</span> <span class="nv">page.line_orders</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;OrderedGroup</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;ro_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">id</span> <span class="k">in</span> <span class="nv">ro</span> <span class="cp">%}</span>
<span class="w">               </span><span class="nt">&lt;ElementRef</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;o_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">REF=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;/OrderedGroup&gt;</span>
<span class="w">	</span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;/UnorderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/ReadingOrder&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;Layout&gt;</span>
<span class="w">        </span><span class="nt">&lt;Page</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">PHYSICAL_IMG_NR=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;page_0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;PrintSpace</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">entity</span> <span class="k">in</span> <span class="nv">page.entities</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.type</span> <span class="o">==</span> <span class="s2">&quot;region&quot;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.previtem</span> <span class="k">and</span> <span class="nb">loop</span><span class="nv">.previtem.type</span> <span class="o">==</span> <span class="s1">&#39;line&#39;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;TextBlock</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.bbox</span> <span class="cp">%}</span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{%</span>- <span class="k">if</span> <span class="nv">entity.tags</span> <span class="cp">%}</span><span class="w"> </span><span class="na">TAGREFS=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">types</span> <span class="o">=</span> <span class="o">[]</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">type</span> <span class="k">in</span> <span class="nv">entity.tags</span> <span class="cp">%}{%</span> <span class="k">set</span> <span class="nv">outer_loop</span> <span class="o">=</span> <span class="nb">loop</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">tag_val</span> <span class="k">in</span> <span class="nv">entity.tags</span><span class="o">[</span><span class="nv">type</span><span class="o">]</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">tag_val</span><span class="o">[</span><span class="s2">&quot;type&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="nv">label</span> -<span class="cp">%}{%</span> <span class="k">set</span> <span class="kp">_</span> <span class="o">=</span> <span class="nv">types.append</span><span class="o">(</span><span class="s1">&#39;TYPE_&#39;</span> <span class="o">~</span> <span class="nv">outer_loop.index</span><span class="o">)</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{{</span> <span class="nv">types</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.bbox</span> <span class="cp">%}</span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                        </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/Shape&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">for</span> <span class="nv">line</span> <span class="k">in</span> <span class="nv">entity.lines</span> -<span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">line</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">endfor</span> -<span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nb">loop</span><span class="nv">.previtem</span> <span class="k">or</span> <span class="nb">loop</span><span class="nv">.previtem.type</span> <span class="o">!=</span> <span class="s1">&#39;line&#39;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;TextBlock</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;textblock_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">entity</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">            </span><span class="nt">&lt;/PrintSpace&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Page&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Layout&gt;</span>
<span class="nt">&lt;/alto&gt;</span>
</pre></div>
</div>
</section>
<section id="pagexml">
<h4>PageXML<a class="headerlink" href="#pagexml" title="Link to this heading">¶</a></h4>
<div class="highlight-xml+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">proc_type_table</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;processing&#39;</span><span class="o">:</span> <span class="s1">&#39;contentGeneration&#39;</span><span class="o">,</span>
              <span class="s1">&#39;preprocessing&#39;</span><span class="o">:</span> <span class="s1">&#39;preOperation&#39;</span><span class="o">,</span>
              <span class="s1">&#39;postprocessing&#39;</span><span class="o">:</span> <span class="s1">&#39;postOperation&#39;</span><span class="o">}</span>
<span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">ws_join</span> <span class="o">=</span> <span class="nv">joiner</span><span class="o">(</span><span class="s2">&quot; &quot;</span><span class="o">)</span> <span class="cp">%}</span>
{%+<span class="w"> </span>macro<span class="w"> </span>render_line(page,<span class="w"> </span>line)<span class="w"> </span>+%}
<span class="w">                    </span><span class="nt">&lt;TextLine</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.baseline</span> <span class="cp">%}</span><span class="w"> </span><span class="na">BASELINE=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.baseline</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.tags</span> <span class="cp">%}</span><span class="w"> </span><span class="na">TAGREFS=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">types</span> <span class="o">=</span> <span class="o">[]</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">type</span> <span class="k">in</span> <span class="nv">line.tags</span> <span class="cp">%}{%</span> <span class="k">set</span> <span class="nv">outer_loop</span> <span class="o">=</span> <span class="nb">loop</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">tag_val</span> <span class="k">in</span> <span class="nv">line.tags</span><span class="o">[</span><span class="nv">type</span><span class="o">]</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">tag_val</span><span class="o">[</span><span class="s2">&quot;type&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="nv">label</span> -<span class="cp">%}{%</span> <span class="k">set</span> <span class="kp">_</span> <span class="o">=</span> <span class="nv">types.append</span><span class="o">(</span><span class="s1">&#39;TYPE_&#39;</span> <span class="o">~</span> <span class="nv">outer_loop.index</span><span class="o">)</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{{</span> <span class="nv">types</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.base_dir</span> <span class="cp">%}</span><span class="w"> </span><span class="na">BASEDIRECTION=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">{</span><span class="s2">&quot;L&quot;</span><span class="o">:</span> <span class="s2">&quot;rtl&quot;</span><span class="o">,</span> <span class="s2">&quot;R&quot;</span><span class="o">:</span> <span class="s2">&quot;rtl&quot;</span><span class="o">}[</span><span class="nv">line.base_dir</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.boundary</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                            </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.text</span> <span class="k">is</span> <span class="nf">string</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">line.text</span><span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.recognition</span><span class="o">|</span><span class="nf">length</span><span class="o">()</span> <span class="o">==</span> <span class="m">0</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">segment</span> <span class="k">in</span> <span class="nv">line.recognition</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="c">{# ALTO forbids encoding whitespace before any String/Shape tags #}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">segment.text</span> <span class="k">is</span> <span class="nf">whitespace</span> <span class="k">and</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="o">&gt;</span> <span class="m">1</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;SP</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;segment_</span><span class="cp">{{</span> <span class="nv">segment.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="cp">}}</span><span class="s">&quot;</span><span class="w">  </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w">  </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;segment_</span><span class="cp">{{</span> <span class="nv">segment.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.text</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WC=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">(</span><span class="nv">segment.confidences</span><span class="o">|</span><span class="nf">sum</span> <span class="o">/</span> <span class="nv">segment.confidences</span><span class="o">|</span><span class="nf">length</span><span class="o">)|</span><span class="nf">round</span><span class="o">(</span><span class="m">4</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">segment.boundary</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                                </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                            </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">char</span> <span class="k">in</span> <span class="nv">segment.recognition</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;Glyph</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;char_</span><span class="cp">{{</span> <span class="nv">char.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.text</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">GC=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.confidence</span><span class="o">|</span><span class="nf">round</span><span class="o">(</span><span class="m">4</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">char.boundary</span> <span class="cp">%}</span>
<span class="w">                                </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                                    </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;/Glyph&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;/String&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="nt">&lt;/TextLine&gt;</span>
{%+<span class="w"> </span>endmacro<span class="w"> </span>%}
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;alto</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="w">    </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/standards/alto/ns-v4#&quot;</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.loc.gov/standards/alto/ns-v4# http://www.loc.gov/standards/alto/v4/alto-4-3.xsd&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Description&gt;</span>
<span class="w">        </span><span class="nt">&lt;MeasurementUnit&gt;</span>pixel<span class="nt">&lt;/MeasurementUnit&gt;</span>
<span class="w">        </span><span class="nt">&lt;sourceImageInformation&gt;</span>
<span class="w">            </span><span class="nt">&lt;fileName&gt;</span><span class="cp">{{</span> <span class="nv">page.name</span> <span class="cp">}}</span><span class="nt">&lt;/fileName&gt;</span>
<span class="w">        </span><span class="nt">&lt;/sourceImageInformation&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">metadata.processing_steps</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">step</span> <span class="k">in</span> <span class="nv">metadata.processing_steps</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;Processing</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;OCR_</span><span class="cp">{{</span> <span class="nv">step.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingCategory&gt;</span><span class="cp">{{</span> <span class="nv">proc_type_table</span><span class="o">[</span><span class="nv">step.category</span><span class="o">]</span> <span class="cp">}}</span><span class="nt">&lt;/processingCategory&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepDescription&gt;</span><span class="cp">{{</span> <span class="nv">step.description</span> <span class="cp">}}</span><span class="nt">&lt;/processingStepDescription&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepSettings&gt;</span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">k</span><span class="o">,</span> <span class="nv">v</span> <span class="k">in</span> <span class="nv">step.settings.items</span><span class="o">()</span> <span class="cp">%}{{</span><span class="nv">k</span><span class="cp">}}</span>:<span class="w"> </span><span class="cp">{{</span><span class="nv">v</span><span class="cp">}}{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>;<span class="w"> </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="nt">&lt;/processingStepSettings&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingSoftware&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareName&gt;</span>kraken<span class="nt">&lt;/softwareName&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareVersion&gt;</span><span class="cp">{{</span> <span class="nv">metadata.version</span> <span class="cp">}}</span><span class="nt">&lt;/softwareVersion&gt;</span>
<span class="w">            </span><span class="nt">&lt;/processingSoftware&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Processing&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;Processing</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;OCR_0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingCategory&gt;</span>other<span class="nt">&lt;/processingCategory&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepDescription&gt;</span>unknown<span class="nt">&lt;/processingStepDescription&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingSoftware&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareName&gt;</span>kraken<span class="nt">&lt;/softwareName&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareVersion&gt;</span><span class="cp">{{</span> <span class="nv">metadata.version</span> <span class="cp">}}</span><span class="nt">&lt;/softwareVersion&gt;</span>
<span class="w">            </span><span class="nt">&lt;/processingSoftware&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Processing&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/Description&gt;</span>
<span class="w">    </span><span class="nt">&lt;Tags&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;OtherTag</span><span class="w"> </span><span class="na">DESCRIPTION=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;TYPE_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">TYPE=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">LABEL=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">label</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/Tags&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">page.line_orders</span><span class="o">|</span><span class="nf">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;ReadingOrder&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">page.line_orders</span> <span class="o">|</span> <span class="nf">length</span> <span class="o">==</span> <span class="m">1</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;OrderedGroup</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;ro_0&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">id</span> <span class="k">in</span> <span class="nv">page.line_orders</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;ElementRef</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;o_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">REF=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;/OrderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;UnorderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">ro</span> <span class="k">in</span> <span class="nv">page.line_orders</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;OrderedGroup</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;ro_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">id</span> <span class="k">in</span> <span class="nv">ro</span> <span class="cp">%}</span>
<span class="w">               </span><span class="nt">&lt;ElementRef</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;o_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">REF=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;/OrderedGroup&gt;</span>
<span class="w">	</span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;/UnorderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/ReadingOrder&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;Layout&gt;</span>
<span class="w">        </span><span class="nt">&lt;Page</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">PHYSICAL_IMG_NR=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;page_0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;PrintSpace</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">entity</span> <span class="k">in</span> <span class="nv">page.entities</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.type</span> <span class="o">==</span> <span class="s2">&quot;region&quot;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.previtem</span> <span class="k">and</span> <span class="nb">loop</span><span class="nv">.previtem.type</span> <span class="o">==</span> <span class="s1">&#39;line&#39;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;TextBlock</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.bbox</span> <span class="cp">%}</span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{%</span>- <span class="k">if</span> <span class="nv">entity.tags</span> <span class="cp">%}</span><span class="w"> </span><span class="na">TAGREFS=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">types</span> <span class="o">=</span> <span class="o">[]</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">type</span> <span class="k">in</span> <span class="nv">entity.tags</span> <span class="cp">%}{%</span> <span class="k">set</span> <span class="nv">outer_loop</span> <span class="o">=</span> <span class="nb">loop</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">tag_val</span> <span class="k">in</span> <span class="nv">entity.tags</span><span class="o">[</span><span class="nv">type</span><span class="o">]</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">tag_val</span><span class="o">[</span><span class="s2">&quot;type&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="nv">label</span> -<span class="cp">%}{%</span> <span class="k">set</span> <span class="kp">_</span> <span class="o">=</span> <span class="nv">types.append</span><span class="o">(</span><span class="s1">&#39;TYPE_&#39;</span> <span class="o">~</span> <span class="nv">outer_loop.index</span><span class="o">)</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{{</span> <span class="nv">types</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.bbox</span> <span class="cp">%}</span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                        </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/Shape&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">for</span> <span class="nv">line</span> <span class="k">in</span> <span class="nv">entity.lines</span> -<span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">line</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">endfor</span> -<span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nb">loop</span><span class="nv">.previtem</span> <span class="k">or</span> <span class="nb">loop</span><span class="nv">.previtem.type</span> <span class="o">!=</span> <span class="s1">&#39;line&#39;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;TextBlock</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;textblock_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">entity</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">            </span><span class="nt">&lt;/PrintSpace&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Page&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Layout&gt;</span>
<span class="nt">&lt;/alto&gt;</span>
</pre></div>
</div>
</section>
<section id="hocr">
<h4>hOCR<a class="headerlink" href="#hocr" title="Link to this heading">¶</a></h4>
<div class="highlight-xml+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">proc_type_table</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;processing&#39;</span><span class="o">:</span> <span class="s1">&#39;contentGeneration&#39;</span><span class="o">,</span>
              <span class="s1">&#39;preprocessing&#39;</span><span class="o">:</span> <span class="s1">&#39;preOperation&#39;</span><span class="o">,</span>
              <span class="s1">&#39;postprocessing&#39;</span><span class="o">:</span> <span class="s1">&#39;postOperation&#39;</span><span class="o">}</span>
<span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">ws_join</span> <span class="o">=</span> <span class="nv">joiner</span><span class="o">(</span><span class="s2">&quot; &quot;</span><span class="o">)</span> <span class="cp">%}</span>
{%+<span class="w"> </span>macro<span class="w"> </span>render_line(page,<span class="w"> </span>line)<span class="w"> </span>+%}
<span class="w">                    </span><span class="nt">&lt;TextLine</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.baseline</span> <span class="cp">%}</span><span class="w"> </span><span class="na">BASELINE=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.baseline</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.tags</span> <span class="cp">%}</span><span class="w"> </span><span class="na">TAGREFS=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">types</span> <span class="o">=</span> <span class="o">[]</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">type</span> <span class="k">in</span> <span class="nv">line.tags</span> <span class="cp">%}{%</span> <span class="k">set</span> <span class="nv">outer_loop</span> <span class="o">=</span> <span class="nb">loop</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">tag_val</span> <span class="k">in</span> <span class="nv">line.tags</span><span class="o">[</span><span class="nv">type</span><span class="o">]</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">tag_val</span><span class="o">[</span><span class="s2">&quot;type&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="nv">label</span> -<span class="cp">%}{%</span> <span class="k">set</span> <span class="kp">_</span> <span class="o">=</span> <span class="nv">types.append</span><span class="o">(</span><span class="s1">&#39;TYPE_&#39;</span> <span class="o">~</span> <span class="nv">outer_loop.index</span><span class="o">)</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{{</span> <span class="nv">types</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">line.base_dir</span> <span class="cp">%}</span><span class="w"> </span><span class="na">BASEDIRECTION=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">{</span><span class="s2">&quot;L&quot;</span><span class="o">:</span> <span class="s2">&quot;rtl&quot;</span><span class="o">,</span> <span class="s2">&quot;R&quot;</span><span class="o">:</span> <span class="s2">&quot;rtl&quot;</span><span class="o">}[</span><span class="nv">line.base_dir</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.boundary</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                            </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.text</span> <span class="k">is</span> <span class="nf">string</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">line.text</span><span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">line.recognition</span><span class="o">|</span><span class="nf">length</span><span class="o">()</span> <span class="o">==</span> <span class="m">0</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">segment</span> <span class="k">in</span> <span class="nv">line.recognition</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="c">{# ALTO forbids encoding whitespace before any String/Shape tags #}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">segment.text</span> <span class="k">is</span> <span class="nf">whitespace</span> <span class="k">and</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="o">&gt;</span> <span class="m">1</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;SP</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;segment_</span><span class="cp">{{</span> <span class="nv">segment.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="cp">}}</span><span class="s">&quot;</span><span class="w">  </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w">  </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;String</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;segment_</span><span class="cp">{{</span> <span class="nv">segment.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.text</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">segment.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WC=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">(</span><span class="nv">segment.confidences</span><span class="o">|</span><span class="nf">sum</span> <span class="o">/</span> <span class="nv">segment.confidences</span><span class="o">|</span><span class="nf">length</span><span class="o">)|</span><span class="nf">round</span><span class="o">(</span><span class="m">4</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">segment.boundary</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                                </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">segment.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                            </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">char</span> <span class="k">in</span> <span class="nv">segment.recognition</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;Glyph</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;char_</span><span class="cp">{{</span> <span class="nv">char.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">CONTENT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.text</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">GC=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.confidence</span><span class="o">|</span><span class="nf">round</span><span class="o">(</span><span class="m">4</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">char.boundary</span> <span class="cp">%}</span>
<span class="w">                                </span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                                    </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/Shape&gt;</span>
<span class="w">                                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                            </span><span class="nt">&lt;/Glyph&gt;</span>
<span class="w">                            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;/String&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="nt">&lt;/TextLine&gt;</span>
{%+<span class="w"> </span>endmacro<span class="w"> </span>%}
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;alto</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="w">    </span><span class="na">xmlns=</span><span class="s">&quot;http://www.loc.gov/standards/alto/ns-v4#&quot;</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.loc.gov/standards/alto/ns-v4# http://www.loc.gov/standards/alto/v4/alto-4-3.xsd&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Description&gt;</span>
<span class="w">        </span><span class="nt">&lt;MeasurementUnit&gt;</span>pixel<span class="nt">&lt;/MeasurementUnit&gt;</span>
<span class="w">        </span><span class="nt">&lt;sourceImageInformation&gt;</span>
<span class="w">            </span><span class="nt">&lt;fileName&gt;</span><span class="cp">{{</span> <span class="nv">page.name</span> <span class="cp">}}</span><span class="nt">&lt;/fileName&gt;</span>
<span class="w">        </span><span class="nt">&lt;/sourceImageInformation&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">metadata.processing_steps</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">step</span> <span class="k">in</span> <span class="nv">metadata.processing_steps</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;Processing</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;OCR_</span><span class="cp">{{</span> <span class="nv">step.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingCategory&gt;</span><span class="cp">{{</span> <span class="nv">proc_type_table</span><span class="o">[</span><span class="nv">step.category</span><span class="o">]</span> <span class="cp">}}</span><span class="nt">&lt;/processingCategory&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepDescription&gt;</span><span class="cp">{{</span> <span class="nv">step.description</span> <span class="cp">}}</span><span class="nt">&lt;/processingStepDescription&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepSettings&gt;</span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">k</span><span class="o">,</span> <span class="nv">v</span> <span class="k">in</span> <span class="nv">step.settings.items</span><span class="o">()</span> <span class="cp">%}{{</span><span class="nv">k</span><span class="cp">}}</span>:<span class="w"> </span><span class="cp">{{</span><span class="nv">v</span><span class="cp">}}{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>;<span class="w"> </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="nt">&lt;/processingStepSettings&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingSoftware&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareName&gt;</span>kraken<span class="nt">&lt;/softwareName&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareVersion&gt;</span><span class="cp">{{</span> <span class="nv">metadata.version</span> <span class="cp">}}</span><span class="nt">&lt;/softwareVersion&gt;</span>
<span class="w">            </span><span class="nt">&lt;/processingSoftware&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Processing&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;Processing</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;OCR_0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingCategory&gt;</span>other<span class="nt">&lt;/processingCategory&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingStepDescription&gt;</span>unknown<span class="nt">&lt;/processingStepDescription&gt;</span>
<span class="w">            </span><span class="nt">&lt;processingSoftware&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareName&gt;</span>kraken<span class="nt">&lt;/softwareName&gt;</span>
<span class="w">                </span><span class="nt">&lt;softwareVersion&gt;</span><span class="cp">{{</span> <span class="nv">metadata.version</span> <span class="cp">}}</span><span class="nt">&lt;/softwareVersion&gt;</span>
<span class="w">            </span><span class="nt">&lt;/processingSoftware&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Processing&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/Description&gt;</span>
<span class="w">    </span><span class="nt">&lt;Tags&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;OtherTag</span><span class="w"> </span><span class="na">DESCRIPTION=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;TYPE_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">TYPE=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">LABEL=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">label</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/Tags&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">page.line_orders</span><span class="o">|</span><span class="nf">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;ReadingOrder&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">page.line_orders</span> <span class="o">|</span> <span class="nf">length</span> <span class="o">==</span> <span class="m">1</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;OrderedGroup</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;ro_0&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">id</span> <span class="k">in</span> <span class="nv">page.line_orders</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;ElementRef</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;o_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">REF=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;/OrderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;UnorderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">ro</span> <span class="k">in</span> <span class="nv">page.line_orders</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;OrderedGroup</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;ro_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">id</span> <span class="k">in</span> <span class="nv">ro</span> <span class="cp">%}</span>
<span class="w">               </span><span class="nt">&lt;ElementRef</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;o_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">REF=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">           </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">           </span><span class="nt">&lt;/OrderedGroup&gt;</span>
<span class="w">	</span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;/UnorderedGroup&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/ReadingOrder&gt;</span>
<span class="w">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;Layout&gt;</span>
<span class="w">        </span><span class="nt">&lt;Page</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">PHYSICAL_IMG_NR=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;page_0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;PrintSpace</span><span class="w"> </span><span class="na">HPOS=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">entity</span> <span class="k">in</span> <span class="nv">page.entities</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.type</span> <span class="o">==</span> <span class="s2">&quot;region&quot;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.previtem</span> <span class="k">and</span> <span class="nb">loop</span><span class="nv">.previtem.type</span> <span class="o">==</span> <span class="s1">&#39;line&#39;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;TextBlock</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.id</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.bbox</span> <span class="cp">%}</span><span class="na">HPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">VPOS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">WIDTH=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">-</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">HEIGHT=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="o">-</span> <span class="nv">entity.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{%</span>- <span class="k">if</span> <span class="nv">entity.tags</span> <span class="cp">%}</span><span class="w"> </span><span class="na">TAGREFS=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">types</span> <span class="o">=</span> <span class="o">[]</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">label</span> <span class="k">in</span> <span class="nv">page.typology</span> <span class="o">|</span> <span class="nf">sort</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">type</span> <span class="k">in</span> <span class="nv">entity.tags</span> <span class="cp">%}{%</span> <span class="k">set</span> <span class="nv">outer_loop</span> <span class="o">=</span> <span class="nb">loop</span> <span class="cp">%}{%</span> <span class="k">for</span> <span class="nv">tag_val</span> <span class="k">in</span> <span class="nv">entity.tags</span><span class="o">[</span><span class="nv">type</span><span class="o">]</span> <span class="cp">%}{%</span> <span class="k">if</span> <span class="nv">tag_val</span><span class="o">[</span><span class="s2">&quot;type&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="nv">label</span> -<span class="cp">%}{%</span> <span class="k">set</span> <span class="kp">_</span> <span class="o">=</span> <span class="nv">types.append</span><span class="o">(</span><span class="s1">&#39;TYPE_&#39;</span> <span class="o">~</span> <span class="nv">outer_loop.index</span><span class="o">)</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}{%</span> <span class="k">endfor</span> <span class="cp">%}{{</span> <span class="nv">types</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.bbox</span> <span class="cp">%}</span><span class="nt">&lt;Shape&gt;</span>
<span class="w">                        </span><span class="nt">&lt;Polygon</span><span class="w"> </span><span class="na">POINTS=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">entity.boundary</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">start</span><span class="o">=[])|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39; &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/Shape&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">for</span> <span class="nv">line</span> <span class="k">in</span> <span class="nv">entity.lines</span> -<span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">line</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                    </span><span class="cp">{%</span>- <span class="k">endfor</span> -<span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nb">loop</span><span class="nv">.previtem</span> <span class="k">or</span> <span class="nb">loop</span><span class="nv">.previtem.type</span> <span class="o">!=</span> <span class="s1">&#39;line&#39;</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;TextBlock</span><span class="w"> </span><span class="na">ID=</span><span class="s">&quot;textblock_</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">entity</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/TextBlock&gt;</span>
<span class="w">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">            </span><span class="nt">&lt;/PrintSpace&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Page&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Layout&gt;</span>
<span class="nt">&lt;/alto&gt;</span>
</pre></div>
</div>
</section>
<section id="abbyy-xml">
<h4>ABBYY XML<a class="headerlink" href="#abbyy-xml" title="Link to this heading">¶</a></h4>
<div class="highlight-xml+jinja notranslate"><div class="highlight"><pre><span></span>{%+<span class="w"> </span>macro<span class="w"> </span>render_line(page,<span class="w"> </span>line)<span class="w"> </span>+%}
<span class="w">                    </span><span class="nt">&lt;line</span><span class="w"> </span><span class="na">baseline=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">((</span><span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="o">+</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">])</span> <span class="o">/</span> <span class="m">2</span><span class="o">)|</span><span class="nf">int</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">r=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">b=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">line.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;&lt;formatting</span><span class="w"> </span><span class="na">lang=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">segment</span> <span class="k">in</span> <span class="nv">line.recognition</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">char</span> <span class="k">in</span> <span class="nv">segment.recognition</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.first</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;charParams</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">r=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">b=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">wordStart=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">charConfidence=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">[</span><span class="nv">char.confidence</span><span class="o">]|</span><span class="nf">rescale</span><span class="o">(</span><span class="m">0</span><span class="o">,</span> <span class="m">100</span><span class="o">)|</span><span class="nf">int</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">char.text</span> <span class="cp">}}</span><span class="nt">&lt;/charParams&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="nt">&lt;charParams</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">r=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">b=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">char.bbox</span><span class="o">[</span><span class="m">3</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">wordStart=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">charConfidence=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="o">[</span><span class="nv">char.confidence</span><span class="o">]|</span><span class="nf">rescale</span><span class="o">(</span><span class="m">0</span><span class="o">,</span> <span class="m">100</span><span class="o">)|</span><span class="nf">int</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">char.text</span> <span class="cp">}}</span><span class="nt">&lt;/charParams&gt;</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">                    </span><span class="nt">&lt;/formatting&gt;</span>
<span class="w">                    </span><span class="nt">&lt;/line&gt;</span>
{%+<span class="w"> </span>endmacro<span class="w"> </span>%}
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;document</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.abbyy.com/FineReader_xml/FineReader10-schema-v1.xml&quot;</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="na">producer=</span><span class="s">&quot;kraken </span><span class="cp">{{</span> <span class="nv">metadata.version</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;page</span><span class="w"> </span><span class="na">width=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">height=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">page.size</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="w"> </span><span class="na">resolution=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">originalCoords=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">entity</span> <span class="k">in</span> <span class="nv">page.entities</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">entity.type</span> <span class="o">==</span> <span class="s2">&quot;region&quot;</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;block</span><span class="w"> </span><span class="na">blockType=</span><span class="s">&quot;Text&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;text&gt;</span>
<span class="w">                </span><span class="nt">&lt;par&gt;</span>
<span class="w">                </span><span class="cp">{%</span>- <span class="k">for</span> <span class="nv">line</span> <span class="k">in</span> <span class="nv">entity.lines</span> -<span class="cp">%}</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">line</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                </span><span class="cp">{%</span>- <span class="k">endfor</span> -<span class="cp">%}</span>
<span class="w">                </span><span class="nt">&lt;/par&gt;</span>
<span class="w">            </span><span class="nt">&lt;/text&gt;</span>
<span class="w">        </span><span class="nt">&lt;/block&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
<span class="w">        </span><span class="nt">&lt;block</span><span class="w"> </span><span class="na">blockType=</span><span class="s">&quot;Text&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;text&gt;</span>
<span class="w">                </span><span class="nt">&lt;par&gt;</span>
<span class="w">                    </span><span class="cp">{{</span> <span class="nv">render_line</span><span class="o">(</span><span class="nv">page</span><span class="o">,</span> <span class="nv">entity</span><span class="o">)</span> <span class="cp">}}</span>
<span class="w">                </span><span class="nt">&lt;/par&gt;</span>
<span class="w">            </span><span class="nt">&lt;/text&gt;</span>
<span class="w">        </span><span class="nt">&lt;/block&gt;</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="w">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="w">    </span><span class="nt">&lt;/page&gt;</span>
<span class="nt">&lt;/document&gt;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="containers-and-helpers">
<h2>Containers and Helpers<a class="headerlink" href="#containers-and-helpers" title="Link to this heading">¶</a></h2>
<section id="kraken-lib-codec-module">
<h3>kraken.lib.codec module<a class="headerlink" href="#kraken-lib-codec-module" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.codec.</span></span><span class="sig-name descname"><span class="pre">PytorchCodec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">charset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.codec.PytorchCodec" title="Link to this definition">¶</a></dt>
<dd><p>Builds a codec converting between graphemes/code points and integer
label sequences.</p>
<p>charset may either be a string, a list or a dict. In the first case
each code point will be assigned a label, in the second case each
string in the list will be assigned a label, and in the final case each
key string will be mapped to the value sequence of integers. In the
first two cases labels will be assigned automatically. When a mapping
is manually provided the label codes need to be a prefix-free code.</p>
<p>As 0 is the blank label in a CTC output layer, output labels and input
dictionaries are/should be 1-indexed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>charset</strong> (<em>Union</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>[</em><em>int</em><em>]</em><em>]</em><em>, </em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>, </em><em>str</em><em>]</em>) – Input character set.</p></li>
<li><p><strong>strict</strong> – Flag indicating if encoding/decoding errors should be ignored
or cause an exception.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenCodecException" title="kraken.lib.exceptions.KrakenCodecException"><strong>KrakenCodecException</strong></a> – If the character set contains duplicate
entries or the mapping is non-singular or
non-prefix-free.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.add_labels">
<span class="sig-name descname"><span class="pre">add_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">charset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.add_labels" title="Link to this definition">¶</a></dt>
<dd><p>Adds additional characters/labels to the codec.</p>
<p>charset may either be a string, a list or a dict. In the first case
each code point will be assigned a label, in the second case each
string in the list will be assigned a label, and in the final case each
key string will be mapped to the value sequence of integers. In the
first two cases labels will be assigned automatically.</p>
<p>As 0 is the blank label in a CTC output layer, output labels and input
dictionaries are/should be 1-indexed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>charset</strong> (<em>Union</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>[</em><em>int</em><em>]</em><em>]</em><em>, </em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>, </em><em>str</em><em>]</em>) – Input character set.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec">PytorchCodec</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.c_sorted">
<span class="sig-name descname"><span class="pre">c_sorted</span></span><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.c_sorted" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.decode" title="Link to this definition">¶</a></dt>
<dd><p>Decodes a labelling.</p>
<p>Given a labelling with cuts and  confidences returns a string with the
cuts and confidences aggregated across label-code point
correspondences. When decoding multilabels to code points the resulting
cuts are min/max, confidences are averaged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>labels</strong> (<em>Sequence</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>float</em><em>]</em><em>]</em>) – Input containing tuples (label, start, end,
confidence).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of tuples (code point, start, end, confidence)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Tuple[str, int, int, float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.encode" title="Link to this definition">¶</a></dt>
<dd><p>Encodes a string into a sequence of labels.</p>
<p>If the code is non-singular we greedily encode the longest sequence first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>s</strong> (<em>str</em>) – Input unicode string</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Ecoded label sequence</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenEncodeException" title="kraken.lib.exceptions.KrakenEncodeException"><strong>KrakenEncodeException</strong></a> – if the a subsequence is not encodable and the
codec is set to strict mode.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>torch.IntTensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.is_valid">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_valid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.is_valid" title="Link to this definition">¶</a></dt>
<dd><p>Returns True if the codec is prefix-free (in label space) and
non-singular (in both directions).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.l2c">
<span class="sig-name descname"><span class="pre">l2c</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.l2c" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.l2c_single">
<span class="sig-name descname"><span class="pre">l2c_single</span></span><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.l2c_single" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.max_label">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_label</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.max_label" title="Link to this definition">¶</a></dt>
<dd><p>Returns the maximum label value.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.merge" title="Link to this definition">¶</a></dt>
<dd><p>Transforms this codec (c1) into another (c2) reusing as many labels as
possible.</p>
<p>The resulting codec is able to encode the same code point sequences
while not necessarily having the same labels for them as c2.
Retains matching character -&gt; label mappings from both codecs, removes
mappings not c2, and adds mappings not in c1. Compound labels in c2 for
code point sequences not in c1 containing labels also in use in c1 are
added as separate labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>codec</strong> (<a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec"><em>PytorchCodec</em></a>) – PytorchCodec to merge with</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A merged codec and a list of labels that were removed from the
original codec.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[<a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec">PytorchCodec</a>, Set]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.codec.PytorchCodec.strict">
<span class="sig-name descname"><span class="pre">strict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#kraken.lib.codec.PytorchCodec.strict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="kraken-containers-module">
<h3>kraken.containers module<a class="headerlink" href="#kraken-containers-module" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.Segmentation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">Segmentation</span></span><a class="headerlink" href="#kraken.containers.Segmentation" title="Link to this definition">¶</a></dt>
<dd><p>A container class for segmentation or recognition results.</p>
<p>In order to allow easy JSON de-/serialization, nested classes for lines
(BaselineLine/BBoxLine) and regions (Region) are reinstantiated from their
dictionaries.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kraken.containers.Segmentation.type" title="Link to this definition">¶</a></dt>
<dd><p>Field indicating if baselines
(<a class="reference internal" href="#kraken.containers.BaselineLine" title="kraken.containers.BaselineLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.containers.BaselineLine</span></code></a>) or bbox
(<a class="reference internal" href="#kraken.containers.BBoxLine" title="kraken.containers.BBoxLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">kraken.containers.BBoxLine</span></code></a>) line records are in the
segmentation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.imagename">
<span class="sig-name descname"><span class="pre">imagename</span></span><a class="headerlink" href="#kraken.containers.Segmentation.imagename" title="Link to this definition">¶</a></dt>
<dd><p>Path to the image associated with the segmentation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.text_direction">
<span class="sig-name descname"><span class="pre">text_direction</span></span><a class="headerlink" href="#kraken.containers.Segmentation.text_direction" title="Link to this definition">¶</a></dt>
<dd><p>Sets the principal orientation (of the line), i.e.
horizontal/vertical, and reading direction (of the
document), i.e. lr/rl.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.script_detection">
<span class="sig-name descname"><span class="pre">script_detection</span></span><a class="headerlink" href="#kraken.containers.Segmentation.script_detection" title="Link to this definition">¶</a></dt>
<dd><p>Flag indicating if the line records have tags.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.lines">
<span class="sig-name descname"><span class="pre">lines</span></span><a class="headerlink" href="#kraken.containers.Segmentation.lines" title="Link to this definition">¶</a></dt>
<dd><p>List of line records. Records are expected to be in a valid
reading order.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.regions">
<span class="sig-name descname"><span class="pre">regions</span></span><a class="headerlink" href="#kraken.containers.Segmentation.regions" title="Link to this definition">¶</a></dt>
<dd><p>Dict mapping types to lists of regions.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.line_orders">
<span class="sig-name descname"><span class="pre">line_orders</span></span><a class="headerlink" href="#kraken.containers.Segmentation.line_orders" title="Link to this definition">¶</a></dt>
<dd><p>List of alternative reading orders for the segmentation.
Each reading order is a list of line indices.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">imagename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">os.PathLike</span></em><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Segmentation.language">
<span class="sig-name descname"><span class="pre">language</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.containers.Segmentation.language" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">line_orders</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">lines</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#kraken.containers.BaselineLine" title="kraken.containers.BaselineLine"><span class="pre">BaselineLine</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#kraken.containers.BBoxLine" title="kraken.containers.BBoxLine"><span class="pre">BBoxLine</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">regions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#kraken.containers.Region" title="kraken.containers.Region"><span class="pre">Region</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">script_detection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#id4" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id5">
<span class="sig-name descname"><span class="pre">text_direction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'horizontal-lr'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'horizontal-rl'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'vertical-lr'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'vertical-rl'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id5" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id6">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'baselines'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'bbox'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id6" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">BaselineLine</span></span><a class="headerlink" href="#kraken.containers.BaselineLine" title="Link to this definition">¶</a></dt>
<dd><p>Baseline-type line record.</p>
<p>A container class for a single line in baseline + bounding polygon format,
optionally containing a transcription, tags, or associated regions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.id" title="Link to this definition">¶</a></dt>
<dd><p>Unique identifier</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.baseline">
<span class="sig-name descname"><span class="pre">baseline</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.baseline" title="Link to this definition">¶</a></dt>
<dd><p>List of tuples <cite>(x_n, y_n)</cite> defining the baseline.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.boundary">
<span class="sig-name descname"><span class="pre">boundary</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.boundary" title="Link to this definition">¶</a></dt>
<dd><p>List of tuples <cite>(x_n, y_n)</cite> defining the bounding polygon of
the line. The first and last points should be identical.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.text">
<span class="sig-name descname"><span class="pre">text</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.text" title="Link to this definition">¶</a></dt>
<dd><p>Transcription of this line.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.base_dir">
<span class="sig-name descname"><span class="pre">base_dir</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.base_dir" title="Link to this definition">¶</a></dt>
<dd><p>An optional string defining the base direction (also called
paragraph direction) for the BiDi algorithm. Valid values are
‘L’ or ‘R’. If None is given the default auto-resolution will
be used.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.imagename">
<span class="sig-name descname"><span class="pre">imagename</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.imagename" title="Link to this definition">¶</a></dt>
<dd><p>Path to the image associated with the line.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.tags">
<span class="sig-name descname"><span class="pre">tags</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.tags" title="Link to this definition">¶</a></dt>
<dd><p>A dict mapping types to values.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.split">
<span class="sig-name descname"><span class="pre">split</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.split" title="Link to this definition">¶</a></dt>
<dd><p>Defines whether this line is in the <cite>train</cite>, <cite>validation</cite>, or
<cite>test</cite> set during training.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.regions">
<span class="sig-name descname"><span class="pre">regions</span></span><a class="headerlink" href="#kraken.containers.BaselineLine.regions" title="Link to this definition">¶</a></dt>
<dd><p>A list of identifiers of regions the line is associated with.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id7">
<span class="sig-name descname"><span class="pre">base_dir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'L'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'R'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id7" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id8">
<span class="sig-name descname"><span class="pre">baseline</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id8" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id9">
<span class="sig-name descname"><span class="pre">boundary</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id9" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id10">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id10" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id11">
<span class="sig-name descname"><span class="pre">imagename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">os.PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id11" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.language">
<span class="sig-name descname"><span class="pre">language</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.containers.BaselineLine.language" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id12">
<span class="sig-name descname"><span class="pre">regions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id12" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id13">
<span class="sig-name descname"><span class="pre">split</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'train'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'validation'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'test'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id13" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id14">
<span class="sig-name descname"><span class="pre">tags</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id14" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id15">
<span class="sig-name descname"><span class="pre">text</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id15" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineLine.type">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'baselines'</span></em><a class="headerlink" href="#kraken.containers.BaselineLine.type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">BBoxLine</span></span><a class="headerlink" href="#kraken.containers.BBoxLine" title="Link to this definition">¶</a></dt>
<dd><p>Bounding box-type line record.</p>
<p>A container class for a single line in axis-aligned bounding box format,
optionally containing a transcription, tags, or associated regions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.id" title="Link to this definition">¶</a></dt>
<dd><p>Unique identifier</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.bbox">
<span class="sig-name descname"><span class="pre">bbox</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.bbox" title="Link to this definition">¶</a></dt>
<dd><p>Tuple in form <cite>(xmin, ymin, xmax, ymax)</cite> defining
the bounding box.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.text">
<span class="sig-name descname"><span class="pre">text</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.text" title="Link to this definition">¶</a></dt>
<dd><p>Transcription of this line.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.base_dir">
<span class="sig-name descname"><span class="pre">base_dir</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.base_dir" title="Link to this definition">¶</a></dt>
<dd><p>An optional string defining the base direction (also called
paragraph direction) for the BiDi algorithm. Valid values are
‘L’ or ‘R’. If None is given the default auto-resolution will
be used.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.imagename">
<span class="sig-name descname"><span class="pre">imagename</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.imagename" title="Link to this definition">¶</a></dt>
<dd><p>Path to the image associated with the line..</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.tags">
<span class="sig-name descname"><span class="pre">tags</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.tags" title="Link to this definition">¶</a></dt>
<dd><p>A dict mapping types to values.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.split">
<span class="sig-name descname"><span class="pre">split</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.split" title="Link to this definition">¶</a></dt>
<dd><p>Defines whether this line is in the <cite>train</cite>, <cite>validation</cite>, or
<cite>test</cite> set during training.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.regions">
<span class="sig-name descname"><span class="pre">regions</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.regions" title="Link to this definition">¶</a></dt>
<dd><p>A list of identifiers of regions the line is associated with.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.text_direction">
<span class="sig-name descname"><span class="pre">text_direction</span></span><a class="headerlink" href="#kraken.containers.BBoxLine.text_direction" title="Link to this definition">¶</a></dt>
<dd><p>Sets the principal orientation (of the line) and
reading direction (of the document).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id16">
<span class="sig-name descname"><span class="pre">base_dir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'L'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'R'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id16" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id17">
<span class="sig-name descname"><span class="pre">bbox</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id17" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id18">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id18" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id19">
<span class="sig-name descname"><span class="pre">imagename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">os.PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id19" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.language">
<span class="sig-name descname"><span class="pre">language</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.containers.BBoxLine.language" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id20">
<span class="sig-name descname"><span class="pre">regions</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id20" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id21">
<span class="sig-name descname"><span class="pre">split</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'train'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'validation'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'test'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id21" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id22">
<span class="sig-name descname"><span class="pre">tags</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id22" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id23">
<span class="sig-name descname"><span class="pre">text</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id23" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id24">
<span class="sig-name descname"><span class="pre">text_direction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'horizontal-lr'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'horizontal-rl'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'vertical-lr'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'vertical-rl'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'horizontal-lr'</span></em><a class="headerlink" href="#id24" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxLine.type">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'bbox'</span></em><a class="headerlink" href="#kraken.containers.BBoxLine.type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.Region">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">Region</span></span><a class="headerlink" href="#kraken.containers.Region" title="Link to this definition">¶</a></dt>
<dd><p>Container class of a single polygonal region.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Region.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#kraken.containers.Region.id" title="Link to this definition">¶</a></dt>
<dd><p>Unique identifier</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Region.boundary">
<span class="sig-name descname"><span class="pre">boundary</span></span><a class="headerlink" href="#kraken.containers.Region.boundary" title="Link to this definition">¶</a></dt>
<dd><p>List of tuples <cite>(x_n, y_n)</cite> defining the bounding polygon of
the region. The first and last points should be identical.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Region.imagename">
<span class="sig-name descname"><span class="pre">imagename</span></span><a class="headerlink" href="#kraken.containers.Region.imagename" title="Link to this definition">¶</a></dt>
<dd><p>Path to the image associated with the region.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Region.tags">
<span class="sig-name descname"><span class="pre">tags</span></span><a class="headerlink" href="#kraken.containers.Region.tags" title="Link to this definition">¶</a></dt>
<dd><p>A dict mapping types to values.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id25">
<span class="sig-name descname"><span class="pre">boundary</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id25" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id26">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id26" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id27">
<span class="sig-name descname"><span class="pre">imagename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">os.PathLike</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id27" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.Region.language">
<span class="sig-name descname"><span class="pre">language</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.containers.Region.language" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id28">
<span class="sig-name descname"><span class="pre">tags</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id28" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.ocr_record">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">ocr_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confidences</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.containers.ocr_record" title="Link to this definition">¶</a></dt>
<dd><p>A record object containing the recognition result of a single line</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>str</em>)</p></li>
<li><p><strong>cuts</strong> (<em>List</em><em>[</em><em>Union</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>confidences</strong> (<em>List</em><em>[</em><em>float</em><em>]</em>)</p></li>
<li><p><strong>display_order</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.ocr_record.base_dir">
<span class="sig-name descname"><span class="pre">base_dir</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.containers.ocr_record.base_dir" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.containers.ocr_record.confidences">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">confidences</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.containers.ocr_record.confidences" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.containers.ocr_record.cuts">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cuts</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span></em><a class="headerlink" href="#kraken.containers.ocr_record.cuts" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.containers.ocr_record.display_order">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">display_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.containers.ocr_record.display_order" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#kraken.containers.ocr_record" title="kraken.containers.ocr_record">ocr_record</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.containers.ocr_record.logical_order">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">logical_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.containers.ocr_record.logical_order" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#kraken.containers.ocr_record" title="kraken.containers.ocr_record">ocr_record</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.containers.ocr_record.prediction">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prediction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#kraken.containers.ocr_record.prediction" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.containers.ocr_record.type">
<em class="property"><span class="k"><span class="pre">abstract</span></span><span class="w"> </span><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kraken.containers.ocr_record.type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">BaselineOCRRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confidences</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord" title="Link to this definition">¶</a></dt>
<dd><p>A record object containing the recognition result of a single line in
baseline format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>str</em>)</p></li>
<li><p><strong>cuts</strong> (<em>List</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>confidences</strong> (<em>List</em><em>[</em><em>float</em><em>]</em>)</p></li>
<li><p><strong>line</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#kraken.containers.BaselineLine" title="kraken.containers.BaselineLine"><em>BaselineLine</em></a><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>display_order</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord.type" title="Link to this definition">¶</a></dt>
<dd><p>‘baselines’ to indicate a baseline record</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord.prediction">
<span class="sig-name descname"><span class="pre">prediction</span></span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord.prediction" title="Link to this definition">¶</a></dt>
<dd><p>The text predicted by the network as one continuous string.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord.cuts">
<span class="sig-name descname"><span class="pre">cuts</span></span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord.cuts" title="Link to this definition">¶</a></dt>
<dd><p>The absolute bounding polygons for each code point in prediction
as a list of tuples [(x0, y0), (x1, y2), …].</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Tuple[int, int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord.confidences">
<span class="sig-name descname"><span class="pre">confidences</span></span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord.confidences" title="Link to this definition">¶</a></dt>
<dd><p>A list of floats indicating the confidence value of each
code point.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord.base_dir">
<span class="sig-name descname"><span class="pre">base_dir</span></span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord.base_dir" title="Link to this definition">¶</a></dt>
<dd><p>An optional string defining the base direction (also called
paragraph direction) for the BiDi algorithm. Valid values are
‘L’ or ‘R’. If None is given the default auto-resolution will
be used.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord.display_order">
<span class="sig-name descname"><span class="pre">display_order</span></span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord.display_order" title="Link to this definition">¶</a></dt>
<dd><p>Flag indicating the order of the code points in the
prediction. In display order (<cite>True</cite>) the n-th code
point in the string corresponds to the n-th leftmost
code point, in logical order (<cite>False</cite>) the n-th code
point corresponds to the n-th read code point. See [UAX
#9](<a class="reference external" href="https://unicode.org/reports/tr9">https://unicode.org/reports/tr9</a>) for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.BaselineOCRRecord" title="kraken.containers.BaselineOCRRecord">BaselineOCRRecord</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>When slicing the record the behavior of the cuts is changed from
earlier versions of kraken. Instead of returning per-character bounding
polygons a single polygons section of the line bounding polygon
starting at the first and extending to the last code point emitted by
the network is returned. This aids numerical stability when computing
aggregated bounding polygons such as for words. Individual code point
bounding polygons are still accessible through the <cite>cuts</cite> attribute or
by iterating over the record code point by code point.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="id29">
<span class="sig-name descname"><span class="pre">base_dir</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id29" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id30">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cuts</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id30" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Tuple[int, int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id31">
<span class="sig-name descname"><span class="pre">display_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id31" title="Link to this definition">¶</a></dt>
<dd><p>Returns the OCR record in Unicode display order, i.e. ordered from left
to right inside the line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>) – An optional string defining the base direction (also
called paragraph direction) for the BiDi algorithm. Valid
values are ‘L’ or ‘R’. If None is given the default
auto-resolution will be used.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.BaselineOCRRecord" title="kraken.containers.BaselineOCRRecord">BaselineOCRRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.containers.BaselineOCRRecord.logical_order">
<span class="sig-name descname"><span class="pre">logical_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.containers.BaselineOCRRecord.logical_order" title="Link to this definition">¶</a></dt>
<dd><p>Returns the OCR record in Unicode logical order, i.e. in the order the
characters in the line would be read by a human.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>) – An optional string defining the base direction (also
called paragraph direction) for the BiDi algorithm. Valid
values are ‘L’ or ‘R’. If None is given the default
auto-resolution will be used.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.BaselineOCRRecord" title="kraken.containers.BaselineOCRRecord">BaselineOCRRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id32">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'baselines'</span></em><a class="headerlink" href="#id32" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">BBoxOCRRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confidences</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord" title="Link to this definition">¶</a></dt>
<dd><p>A record object containing the recognition result of a single line in
bbox format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>str</em>)</p></li>
<li><p><strong>cuts</strong> (<em>List</em><em>[</em><em>Tuple</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>confidences</strong> (<em>List</em><em>[</em><em>float</em><em>]</em>)</p></li>
<li><p><strong>line</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#kraken.containers.BBoxLine" title="kraken.containers.BBoxLine"><em>BBoxLine</em></a><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>display_order</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord.type" title="Link to this definition">¶</a></dt>
<dd><p>‘bbox’ to indicate a bounding box record</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord.prediction">
<span class="sig-name descname"><span class="pre">prediction</span></span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord.prediction" title="Link to this definition">¶</a></dt>
<dd><p>The text predicted by the network as one continuous string.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord.cuts">
<span class="sig-name descname"><span class="pre">cuts</span></span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord.cuts" title="Link to this definition">¶</a></dt>
<dd><p>The absolute bounding polygons for each code point in prediction
as a list of 4-tuples <cite>((x0, y0), (x1, y0), (x1, y1), (x0, y1))</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord.confidences">
<span class="sig-name descname"><span class="pre">confidences</span></span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord.confidences" title="Link to this definition">¶</a></dt>
<dd><p>A list of floats indicating the confidence value of each
code point.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord.base_dir">
<span class="sig-name descname"><span class="pre">base_dir</span></span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord.base_dir" title="Link to this definition">¶</a></dt>
<dd><p>An optional string defining the base direction (also called
paragraph direction) for the BiDi algorithm. Valid values are
‘L’ or ‘R’. If None is given the default auto-resolution will
be used.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord.display_order">
<span class="sig-name descname"><span class="pre">display_order</span></span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord.display_order" title="Link to this definition">¶</a></dt>
<dd><p>Flag indicating the order of the code points in the
prediction. In display order (<cite>True</cite>) the n-th code
point in the string corresponds to the n-th leftmost
code point, in logical order (<cite>False</cite>) the n-th code
point corresponds to the n-th read code point. See [UAX
#9](<a class="reference external" href="https://unicode.org/reports/tr9">https://unicode.org/reports/tr9</a>) for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.BBoxOCRRecord" title="kraken.containers.BBoxOCRRecord">BBoxOCRRecord</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>When slicing the record the behavior of the cuts is changed from
earlier versions of kraken. Instead of returning per-character bounding
polygons a single polygons section of the line bounding polygon
starting at the first and extending to the last code point emitted by
the network is returned. This aids numerical stability when computing
aggregated bounding polygons such as for words. Individual code point
bounding polygons are still accessible through the <cite>cuts</cite> attribute or
by iterating over the record code point by code point.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="id33">
<span class="sig-name descname"><span class="pre">base_dir</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id33" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id34">
<span class="sig-name descname"><span class="pre">display_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id34" title="Link to this definition">¶</a></dt>
<dd><p>Returns the OCR record in Unicode display order, i.e. ordered from left
to right inside the line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>) – An optional string defining the base direction (also
called paragraph direction) for the BiDi algorithm. Valid
values are ‘L’ or ‘R’. If None is given the default
auto-resolution will be used.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.BBoxOCRRecord" title="kraken.containers.BBoxOCRRecord">BBoxOCRRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.containers.BBoxOCRRecord.logical_order">
<span class="sig-name descname"><span class="pre">logical_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.containers.BBoxOCRRecord.logical_order" title="Link to this definition">¶</a></dt>
<dd><p>Returns the OCR record in Unicode logical order, i.e. in the order the
characters in the line would be read by a human.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>) – An optional string defining the base direction (also
called paragraph direction) for the BiDi algorithm. Valid
values are ‘L’ or ‘R’. If None is given the default
auto-resolution will be used.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.containers.BBoxOCRRecord" title="kraken.containers.BBoxOCRRecord">BBoxOCRRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id35">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'bbox'</span></em><a class="headerlink" href="#id35" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.containers.ProcessingStep">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.containers.</span></span><span class="sig-name descname"><span class="pre">ProcessingStep</span></span><a class="headerlink" href="#kraken.containers.ProcessingStep" title="Link to this definition">¶</a></dt>
<dd><p>A processing step in the recognition pipeline.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.ProcessingStep.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#kraken.containers.ProcessingStep.id" title="Link to this definition">¶</a></dt>
<dd><p>Unique identifier</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.ProcessingStep.category">
<span class="sig-name descname"><span class="pre">category</span></span><a class="headerlink" href="#kraken.containers.ProcessingStep.category" title="Link to this definition">¶</a></dt>
<dd><p>Category of processing step that has been performed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.ProcessingStep.description">
<span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#kraken.containers.ProcessingStep.description" title="Link to this definition">¶</a></dt>
<dd><p>Natural-language description of the process.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.containers.ProcessingStep.settings">
<span class="sig-name descname"><span class="pre">settings</span></span><a class="headerlink" href="#kraken.containers.ProcessingStep.settings" title="Link to this definition">¶</a></dt>
<dd><p>Dict describing the parameters of the processing step.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id36">
<span class="sig-name descname"><span class="pre">category</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'preprocessing'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'processing'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'postprocessing'</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id36" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id37">
<span class="sig-name descname"><span class="pre">description</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id37" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id38">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id38" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id39">
<span class="sig-name descname"><span class="pre">settings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id39" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="kraken-lib-ctc-decoder">
<h3>kraken.lib.ctc_decoder<a class="headerlink" href="#kraken-lib-ctc-decoder" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.ctc_decoder.beam_decoder">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.ctc_decoder.</span></span><span class="sig-name descname"><span class="pre">beam_decoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beam_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.ctc_decoder.beam_decoder" title="Link to this definition">¶</a></dt>
<dd><p>Translates back the network output to a label sequence using
same-prefix-merge beam search decoding as described in [0].</p>
<p>[0] Hannun, Awni Y., et al. “First-pass large vocabulary continuous speech
recognition using bi-directional recurrent DNNs.” arXiv preprint
arXiv:1408.2873 (2014).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> – (C, W) shaped softmax output tensor</p></li>
<li><p><strong>beam_size</strong> (<em>int</em>) – Size of the beam</p></li>
<li><p><strong>outputs</strong> (<em>numpy.ndarray</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list with tuples (class, start, end, prob). max is the maximum value
of the softmax layer in the region.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[int, int, int, float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.ctc_decoder.greedy_decoder">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.ctc_decoder.</span></span><span class="sig-name descname"><span class="pre">greedy_decoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.ctc_decoder.greedy_decoder" title="Link to this definition">¶</a></dt>
<dd><p>Translates back the network output to a label sequence using greedy/best
path decoding as described in [0].</p>
<p>[0] Graves, Alex, et al. “Connectionist temporal classification: labelling
unsegmented sequence data with recurrent neural networks.” Proceedings of
the 23rd international conference on Machine learning. ACM, 2006.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> – (C, W) shaped softmax output tensor</p></li>
<li><p><strong>outputs</strong> (<em>numpy.ndarray</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list with tuples (class, start, end, max). max is the maximum value
of the softmax layer in the region.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[int, int, int, float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.ctc_decoder.blank_threshold_decoder">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.ctc_decoder.</span></span><span class="sig-name descname"><span class="pre">blank_threshold_decoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.ctc_decoder.blank_threshold_decoder" title="Link to this definition">¶</a></dt>
<dd><p>Translates back the network output to a label sequence as the original
ocropy/clstm.</p>
<p>Thresholds on class 0, then assigns the maximum (non-zero) class to each
region.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> – (C, W) shaped softmax output tensor</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – Threshold for 0 class when determining possible label
locations.</p></li>
<li><p><strong>outputs</strong> (<em>numpy.ndarray</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list with tuples (class, start, end, max). max is the maximum value
of the softmax layer in the region.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[int, int, int, float]]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="kraken-lib-exceptions">
<h3>kraken.lib.exceptions<a class="headerlink" href="#kraken-lib-exceptions" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenCodecException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenCodecException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenCodecException" title="Link to this definition">¶</a></dt>
<dd><p>Common base class for all non-exit exceptions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenStopTrainingException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenStopTrainingException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenStopTrainingException" title="Link to this definition">¶</a></dt>
<dd><p>Common base class for all non-exit exceptions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenEncodeException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenEncodeException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenEncodeException" title="Link to this definition">¶</a></dt>
<dd><p>Common base class for all non-exit exceptions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenRecordException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenRecordException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenRecordException" title="Link to this definition">¶</a></dt>
<dd><p>Common base class for all non-exit exceptions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenInvalidModelException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenInvalidModelException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenInvalidModelException" title="Link to this definition">¶</a></dt>
<dd><p>Common base class for all non-exit exceptions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenInputException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenInputException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenInputException" title="Link to this definition">¶</a></dt>
<dd><p>Common base class for all non-exit exceptions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenRepoException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenRepoException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenRepoException" title="Link to this definition">¶</a></dt>
<dd><p>Common base class for all non-exit exceptions.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenCairoSurfaceException">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.exceptions.</span></span><span class="sig-name descname"><span class="pre">KrakenCairoSurfaceException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.exceptions.KrakenCairoSurfaceException" title="Link to this definition">¶</a></dt>
<dd><p>Raised when the Cairo surface couldn’t be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>str</em>)</p></li>
<li><p><strong>width</strong> (<em>int</em>)</p></li>
<li><p><strong>height</strong> (<em>int</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenCairoSurfaceException.message">
<span class="sig-name descname"><span class="pre">message</span></span><a class="headerlink" href="#kraken.lib.exceptions.KrakenCairoSurfaceException.message" title="Link to this definition">¶</a></dt>
<dd><p>Error message</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenCairoSurfaceException.width">
<span class="sig-name descname"><span class="pre">width</span></span><a class="headerlink" href="#kraken.lib.exceptions.KrakenCairoSurfaceException.width" title="Link to this definition">¶</a></dt>
<dd><p>Width of the surface</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.exceptions.KrakenCairoSurfaceException.height">
<span class="sig-name descname"><span class="pre">height</span></span><a class="headerlink" href="#kraken.lib.exceptions.KrakenCairoSurfaceException.height" title="Link to this definition">¶</a></dt>
<dd><p>Height of the surface</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id40">
<span class="sig-name descname"><span class="pre">height</span></span><a class="headerlink" href="#id40" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id41">
<span class="sig-name descname"><span class="pre">message</span></span><a class="headerlink" href="#id41" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id42">
<span class="sig-name descname"><span class="pre">width</span></span><a class="headerlink" href="#id42" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="kraken-lib-models-module">
<h3>kraken.lib.models module<a class="headerlink" href="#kraken-lib-models-module" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.models.</span></span><span class="sig-name descname"><span class="pre">TorchSeqRecognizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decoder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">kraken.lib.ctc_decoder.greedy_decoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer" title="Link to this definition">¶</a></dt>
<dd><p>A wrapper class around a TorchVGSLModel for text recognition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nn</strong> (<a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel" title="kraken.lib.vgsl.TorchVGSLModel"><em>kraken.lib.vgsl.TorchVGSLModel</em></a>)</p></li>
<li><p><strong>temperature</strong> (<em>float</em>)</p></li>
<li><p><strong>train</strong> (<em>bool</em>)</p></li>
<li><p><strong>device</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.codec">
<span class="sig-name descname"><span class="pre">codec</span></span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.codec" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.decoder">
<span class="sig-name descname"><span class="pre">decoder</span></span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.decoder" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.device">
<span class="sig-name descname"><span class="pre">device</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'cpu'</span></em><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.device" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.forward" title="Link to this definition">¶</a></dt>
<dd><p>Performs a forward pass on a torch tensor of one or more lines with
shape (N, C, H, W) and returns a numpy array (N, W, C).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>torch.Tensor</em>) – NCHW line tensor</p></li>
<li><p><strong>lens</strong> (<em>torch.Tensor</em>) – Optional tensor containing sequence lengths if N &gt; 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple with (N, W, C) shaped numpy array and final output sequence
lengths.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenInputException" title="kraken.lib.exceptions.KrakenInputException"><strong>KrakenInputException</strong></a> – Is raised if the channel dimension isn’t of
size 1 in the network output.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[numpy.ndarray, tuple[numpy.ndarray, numpy.ndarray]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.kind">
<span class="sig-name descname"><span class="pre">kind</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.kind" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.nn">
<span class="sig-name descname"><span class="pre">nn</span></span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.nn" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.one_channel_mode">
<span class="sig-name descname"><span class="pre">one_channel_mode</span></span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.one_channel_mode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.predict" title="Link to this definition">¶</a></dt>
<dd><p>Performs a forward pass on a torch tensor of a line with shape (N, C, H, W)
and returns the decoding as a list of tuples (string, start, end,
confidence).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>torch.Tensor</em>) – NCHW line tensor</p></li>
<li><p><strong>lens</strong> (<em>Optional</em><em>[</em><em>torch.Tensor</em><em>]</em>) – Optional tensor containing sequence lengths if N &gt; 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of decoded sequences.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[List[tuple[str, int, int, float]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.predict_labels">
<span class="sig-name descname"><span class="pre">predict_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.predict_labels" title="Link to this definition">¶</a></dt>
<dd><p>Performs a forward pass on a torch tensor of a line with shape (N, C, H, W)
and returns a list of tuples (class, start, end, max). Max is the
maximum value of the softmax layer in the region.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>torch.tensor</em>)</p></li>
<li><p><strong>lens</strong> (<em>torch.Tensor</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[List[tuple[int, int, int, float]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.predict_string">
<span class="sig-name descname"><span class="pre">predict_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.predict_string" title="Link to this definition">¶</a></dt>
<dd><p>Performs a forward pass on a torch tensor of a line with shape (N, C, H, W)
and returns a string of the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>torch.Tensor</em>) – NCHW line tensor</p></li>
<li><p><strong>lens</strong> (<em>Optional</em><em>[</em><em>torch.Tensor</em><em>]</em>) – Optional tensor containing the sequence lengths of the input batch.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.seg_type">
<span class="sig-name descname"><span class="pre">seg_type</span></span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.seg_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.temperature">
<span class="sig-name descname"><span class="pre">temperature</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.temperature" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.to" title="Link to this definition">¶</a></dt>
<dd><p>Moves model to device and automatically loads input tensors onto it.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.models.TorchSeqRecognizer.train">
<span class="sig-name descname"><span class="pre">train</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#kraken.lib.models.TorchSeqRecognizer.train" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.models.load_any">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.models.</span></span><span class="sig-name descname"><span class="pre">load_any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.models.load_any" title="Link to this definition">¶</a></dt>
<dd><p>Loads anything that was, is, and will be a valid ocropus model and
instantiates a shiny new kraken.lib.lstm.SeqRecognizer from the RNN
configuration in the file.</p>
<p>Currently it recognizes the following kinds of models:</p>
<blockquote>
<div><ul class="simple">
<li><p>protobuf models containing VGSL segmentation and recognition
networks.</p></li>
</ul>
</div></blockquote>
<p>Additionally an attribute ‘kind’ will be added to the SeqRecognizer
containing a string representation of the source kind. Current known values
are:</p>
<blockquote>
<div><ul class="simple">
<li><p>vgsl for VGSL models</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>Union</em><em>[</em><em>os.PathLike</em><em>, </em><em>str</em><em>]</em>) – Path to the model</p></li>
<li><p><strong>train</strong> (<em>bool</em>) – Enables gradient calculation and dropout layers in model.</p></li>
<li><p><strong>device</strong> (<em>str</em>) – Target device</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A kraken.lib.models.TorchSeqRecognizer object.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenInvalidModelException" title="kraken.lib.exceptions.KrakenInvalidModelException"><strong>KrakenInvalidModelException</strong></a> – if the model is not loadable by any parser.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer" title="kraken.lib.models.TorchSeqRecognizer">TorchSeqRecognizer</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="kraken-lib-segmentation-module">
<h3>kraken.lib.segmentation module<a class="headerlink" href="#kraken-lib-segmentation-module" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.reading_order">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">reading_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lr'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.reading_order" title="Link to this definition">¶</a></dt>
<dd><p>Given the list of lines (a list of 2D slices), computes
the partial reading order.  The output is a binary 2D array
such that order[i,j] is true if line i comes before line j
in reading order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>Sequence</em><em>[</em><em>tuple</em><em>[</em><em>slice</em><em>, </em><em>slice</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>text_direction</strong> (<em>Literal</em><em>[</em><em>'lr'</em><em>, </em><em>'rl'</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.neural_reading_order">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">neural_reading_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.neural_reading_order" title="Link to this definition">¶</a></dt>
<dd><p>Given a list of baselines and regions, calculates the correct reading order
and applies it to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>Sequence</em><em>[</em><em>Dict</em><em>]</em>) – list of tuples containing the baseline and its polygonization.</p></li>
<li><p><strong>model</strong> (<a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel" title="kraken.lib.vgsl.TorchVGSLModel"><em>kraken.lib.vgsl.TorchVGSLModel</em></a>) – torch Module for</p></li>
<li><p><strong>text_direction</strong> (<em>str</em>)</p></li>
<li><p><strong>regions</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>shapely.geometry.Polygon</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>im_size</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>class_mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The indices of the ordered input.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.polygonal_reading_order">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">polygonal_reading_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.polygonal_reading_order" title="Link to this definition">¶</a></dt>
<dd><p>Given a list of baselines and regions, calculates the correct reading order
and applies it to the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>Sequence</em><em>[</em><em>Dict</em><em>]</em>) – list of tuples containing the baseline and its polygonization.</p></li>
<li><p><strong>regions</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>shapely.geometry.Polygon</em><em>]</em><em>]</em>) – list of region polygons.</p></li>
<li><p><strong>text_direction</strong> (<em>Literal</em><em>[</em><em>'lr'</em><em>, </em><em>'rl'</em><em>]</em>) – Set principal text direction for column ordering. Can
be ‘lr’ or ‘rl’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The indices of the ordered input.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.vectorize_lines">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">vectorize_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.17</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'horizontal'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.vectorize_lines" title="Link to this definition">¶</a></dt>
<dd><p>Vectorizes lines from a binarized array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>np.ndarray</em>) – Array of shape (3, H, W) with the first dimension
being probabilities for (start_separators,
end_separators, baseline).</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – Threshold for baseline blob detection.</p></li>
<li><p><strong>min_length</strong> (<em>int</em>) – Minimal length of output baselines.</p></li>
<li><p><strong>text_direction</strong> (<em>str</em>) – Base orientation of the text line (horizontal or
vertical).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[[x0, y0, … xn, yn], [xm, ym, …, xk, yk], … ]
A list of lists containing the points of all baseline polylines.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.calculate_polygonal_environment">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">calculate_polygonal_environment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baselines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppl_obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im_feats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.calculate_polygonal_environment" title="Link to this definition">¶</a></dt>
<dd><p>Given a list of baselines and an input image, calculates a polygonal
environment around each baseline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>PIL.Image.Image</em>) – grayscale input image (mode ‘L’)</p></li>
<li><p><strong>baselines</strong> (<em>Sequence</em><em>[</em><em>Sequence</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em><em>]</em>) – list of lists containing a single baseline per entry.</p></li>
<li><p><strong>suppl_obj</strong> (<em>Sequence</em><em>[</em><em>Sequence</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em><em>]</em>) – list of lists containing additional polylines that should be
considered hard boundaries for polygonizaton purposes. Can
be used to prevent polygonization into non-text areas such
as illustrations or to compute the polygonization of a
subset of the lines in an image.</p></li>
<li><p><strong>im_feats</strong> (<em>numpy.ndarray</em>) – An optional precomputed seamcarve energy map. Overrides data
in <cite>im</cite>. The default map is <cite>gaussian_filter(sobel(im), 2)</cite>.</p></li>
<li><p><strong>scale</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em>) – A 2-tuple (h, w) containing optional scale factors of the input.
Values of 0 are used for aspect-preserving scaling. <cite>None</cite> skips
input scaling.</p></li>
<li><p><strong>topline</strong> (<em>bool</em>) – Switch to change default baseline location for offset
calculation purposes. If set to False, baselines are assumed
to be on the bottom of the text line and will be offset
upwards, if set to True, baselines are on the top and will be
offset downwards. If set to None, no offset will be applied.</p></li>
<li><p><strong>raise_on_error</strong> (<em>bool</em>) – Raises error instead of logging them when they are
not-blocking</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of lists of coordinates. If no polygonization could be compute for
a baseline <cite>None</cite> is returned instead.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.scale_polygonal_lines">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">scale_polygonal_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.scale_polygonal_lines" title="Link to this definition">¶</a></dt>
<dd><p>Scales baselines/polygon coordinates by a certain factor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>Sequence</em><em>[</em><em>tuple</em><em>[</em><em>list</em><em>, </em><em>list</em><em>]</em><em>]</em>) – list of tuples containing the baseline and its polygonization.</p></li>
<li><p><strong>scale</strong> (<em>Union</em><em>[</em><em>float</em><em>, </em><em>tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>]</em>) – Scaling factor</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Sequence[tuple[list, list]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.scale_regions">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">scale_regions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.scale_regions" title="Link to this definition">¶</a></dt>
<dd><p>Scales baselines/polygon coordinates by a certain factor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> – list of tuples containing the baseline and its polygonization.</p></li>
<li><p><strong>scale</strong> (<em>Union</em><em>[</em><em>float</em><em>, </em><em>tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em><em>]</em>) – Scaling factor</p></li>
<li><p><strong>regions</strong> (<em>Sequence</em><em>[</em><em>tuple</em><em>[</em><em>list</em><em>[</em><em>int</em><em>]</em><em>, </em><em>list</em><em>[</em><em>int</em><em>]</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Sequence[tuple[list, list]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.compute_polygon_section">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">compute_polygon_section</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">baseline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.compute_polygon_section" title="Link to this definition">¶</a></dt>
<dd><p>Given a baseline, polygonal boundary, and two points on the baseline return
the rectangle formed by the orthogonal cuts on that baseline segment. The
resulting polygon is not garantueed to have a non-zero area.</p>
<p>The distance can be larger than the actual length of the baseline if the
baseline endpoints are inside the bounding polygon. In that case the
baseline will be extrapolated to the polygon edge.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>baseline</strong> (<em>Sequence</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>) – A polyline ((x1, y1), …, (xn, yn))</p></li>
<li><p><strong>boundary</strong> (<em>Sequence</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>) – A bounding polygon around the baseline (same format as
baseline). Last and first point are automatically connected.</p></li>
<li><p><strong>dist1</strong> (<em>int</em>) – Absolute distance along the baseline of the first point.</p></li>
<li><p><strong>dist2</strong> (<em>int</em>) – Absolute distance along the baseline of the second point.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A sequence of polygon points.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[tuple[int, int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.segmentation.extract_polygons">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.segmentation.</span></span><span class="sig-name descname"><span class="pre">extract_polygons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legacy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.segmentation.extract_polygons" title="Link to this definition">¶</a></dt>
<dd><p>Yields the subimages of image im defined in the list of bounding polygons
with baselines preserving order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>PIL.Image.Image</em>) – Input image</p></li>
<li><p><strong>bounds</strong> (<a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a>) – A Segmentation class containing a bounding box or baseline
segmentation.</p></li>
<li><p><strong>legacy</strong> (<em>bool</em>) – Use the old, slow, and deprecated path</p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>The extracted subimage, and the corresponding bounding box or baseline</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Generator[tuple[PIL.Image.Image, Union[<a class="reference internal" href="#kraken.containers.BBoxLine" title="kraken.containers.BBoxLine">kraken.containers.BBoxLine</a>, <a class="reference internal" href="#kraken.containers.BaselineLine" title="kraken.containers.BaselineLine">kraken.containers.BaselineLine</a>]], None, None]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="kraken-lib-vgsl-module">
<h3>kraken.lib.vgsl module<a class="headerlink" href="#kraken-lib-vgsl-module" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.vgsl.</span></span><span class="sig-name descname"><span class="pre">TorchVGSLModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel" title="Link to this definition">¶</a></dt>
<dd><p>Class building a torch module from a VSGL spec.</p>
<p>The initialized class will contain a variable number of layers and a loss
function. Inputs and outputs are always 4D tensors in order (batch,
channels, height, width) with channels always being the feature dimension.</p>
<p>Importantly this means that a recurrent network will be fed the channel
vector at each step along its time axis, i.e. either put the non-time-axis
dimension into the channels dimension or use a summarizing RNN squashing
the time axis to 1 and putting the output into the channels dimension
respectively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spec</strong> (<em>str</em>)</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.input">
<span class="sig-name descname"><span class="pre">input</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.input" title="Link to this definition">¶</a></dt>
<dd><p>Expected input tensor as a 4-tuple.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.nn">
<span class="sig-name descname"><span class="pre">nn</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.nn" title="Link to this definition">¶</a></dt>
<dd><p>Stack of layers parsed from the spec.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.criterion">
<span class="sig-name descname"><span class="pre">criterion</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.criterion" title="Link to this definition">¶</a></dt>
<dd><p>Fully parametrized loss function.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.user_metadata">
<span class="sig-name descname"><span class="pre">user_metadata</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.user_metadata" title="Link to this definition">¶</a></dt>
<dd><p>dict with user defined metadata. Is flushed into
model file during saving/overwritten by loading
operations.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.one_channel_mode">
<span class="sig-name descname"><span class="pre">one_channel_mode</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.one_channel_mode" title="Link to this definition">¶</a></dt>
<dd><p>Field indicating the image type used during
training of one-channel images. Is ‘1’ for
models trained on binarized images, ‘L’ for
grayscale, and None otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.add_codec">
<span class="sig-name descname"><span class="pre">add_codec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.add_codec" title="Link to this definition">¶</a></dt>
<dd><p>Adds a PytorchCodec to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>codec</strong> (<a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec"><em>kraken.lib.codec.PytorchCodec</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.append" title="Link to this definition">¶</a></dt>
<dd><p>Splits a model at layer <cite>idx</cite> and append layers <cite>spec</cite>.</p>
<p>New layers are initialized using the init_weights method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idx</strong> (<em>int</em>) – Index of layer to append spec to starting with 1.  To
select the whole layer stack set idx to None.</p></li>
<li><p><strong>spec</strong> (<em>str</em>) – VGSL spec without input block to append to model.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.aux_layers">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aux_layers</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.aux_layers" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_addition">
<span class="sig-name descname"><span class="pre">build_addition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_addition" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_conv">
<span class="sig-name descname"><span class="pre">build_conv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_conv" title="Link to this definition">¶</a></dt>
<dd><p>Builds a 2D convolution layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_dropout">
<span class="sig-name descname"><span class="pre">build_dropout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_dropout" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_groupnorm">
<span class="sig-name descname"><span class="pre">build_groupnorm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_groupnorm" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_identity">
<span class="sig-name descname"><span class="pre">build_identity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_identity" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_maxpool">
<span class="sig-name descname"><span class="pre">build_maxpool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_maxpool" title="Link to this definition">¶</a></dt>
<dd><p>Builds a maxpool layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_output">
<span class="sig-name descname"><span class="pre">build_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_output" title="Link to this definition">¶</a></dt>
<dd><p>Builds an output layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_parallel">
<span class="sig-name descname"><span class="pre">build_parallel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_parallel" title="Link to this definition">¶</a></dt>
<dd><p>Builds a block of parallel layers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_reshape">
<span class="sig-name descname"><span class="pre">build_reshape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_reshape" title="Link to this definition">¶</a></dt>
<dd><p>Builds a reshape layer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_rnn">
<span class="sig-name descname"><span class="pre">build_rnn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_rnn" title="Link to this definition">¶</a></dt>
<dd><p>Builds an LSTM/GRU layer returning number of outputs and layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_ro">
<span class="sig-name descname"><span class="pre">build_ro</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_ro" title="Link to this definition">¶</a></dt>
<dd><p>Builds a RO determination layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_series">
<span class="sig-name descname"><span class="pre">build_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_series" title="Link to this definition">¶</a></dt>
<dd><p>Builds a serial block of layers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.build_wav2vec2">
<span class="sig-name descname"><span class="pre">build_wav2vec2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_output_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.build_wav2vec2" title="Link to this definition">¶</a></dt>
<dd><p>Builds a Wav2Vec2 masking layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>blocks</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>idx</strong> (<em>int</em>)</p></li>
<li><p><strong>target_output_shape</strong> (<em>Optional</em><em>[</em><em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Union[tuple[None, None, None], tuple[tuple[int, int, int, int], str, Callable]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.codec">
<span class="sig-name descname"><span class="pre">codec</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec"><span class="pre">kraken.lib.codec.PytorchCodec</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.codec" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id43">
<span class="sig-name descname"><span class="pre">criterion</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id43" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.eval" title="Link to this definition">¶</a></dt>
<dd><p>Sets the model to evaluation/inference mode, disabling dropout and
gradient calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.hyper_params">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hyper_params</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.hyper_params" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.idx">
<span class="sig-name descname"><span class="pre">idx</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.idx" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.init_weights">
<span class="sig-name descname"><span class="pre">init_weights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">slice(0,</span> <span class="pre">None)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.init_weights" title="Link to this definition">¶</a></dt>
<dd><p>Initializes weights for all or a subset of layers in the graph.</p>
<p>LSTM/GRU layers are orthogonally initialized, convolutional layers
uniformly from (-0.1,0.1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>idx</strong> (<em>slice</em>) – A slice object representing the indices of layers to
initialize.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id44">
<span class="sig-name descname"><span class="pre">input</span></span><a class="headerlink" href="#id44" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.load_model">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.load_model" title="Link to this definition">¶</a></dt>
<dd><p>Deserializes a VGSL model from a CoreML file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>os.PathLike</em><em>]</em>) – CoreML file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A TorchVGSLModel instance.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>KrakenInvalidModelException if the model data is invalid</strong><strong> (</strong><strong>not a</strong> – </p></li>
<li><p><strong>string</strong><strong>, </strong><strong>protobuf file</strong><strong>, or </strong><strong>without appropriate metadata</strong><strong>)</strong><strong>.</strong> – </p></li>
<li><p><strong>FileNotFoundError if the path doesn't point to a file.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.model_type">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">model_type</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.model_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.named_spec">
<span class="sig-name descname"><span class="pre">named_spec</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.named_spec" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id45">
<span class="sig-name descname"><span class="pre">nn</span></span><a class="headerlink" href="#id45" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id46">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">one_channel_mode</span></span><a class="headerlink" href="#id46" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.ops">
<span class="sig-name descname"><span class="pre">ops</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.ops" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.resize_output">
<span class="sig-name descname"><span class="pre">resize_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">del_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.resize_output" title="Link to this definition">¶</a></dt>
<dd><p>Resizes an output layer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_size</strong> (<em>int</em>) – New size/output channels of last layer</p></li>
<li><p><strong>del_indices</strong> (<em>list</em>) – list of outputs to delete from layer</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.save_model">
<span class="sig-name descname"><span class="pre">save_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.save_model" title="Link to this definition">¶</a></dt>
<dd><p>Serializes the model into path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Target destination</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.seg_type">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">seg_type</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.seg_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.set_num_threads">
<span class="sig-name descname"><span class="pre">set_num_threads</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.set_num_threads" title="Link to this definition">¶</a></dt>
<dd><p>Sets number of OpenMP threads to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num</strong> (<em>int</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.spec">
<span class="sig-name descname"><span class="pre">spec</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.spec" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.to">
<span class="sig-name descname"><span class="pre">to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.to" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>torch.device</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.train" title="Link to this definition">¶</a></dt>
<dd><p>Sets the model to training mode (enables dropout layers and disables
softmax on CTC layers).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.vgsl.TorchVGSLModel.use_legacy_polygons">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">use_legacy_polygons</span></span><a class="headerlink" href="#kraken.lib.vgsl.TorchVGSLModel.use_legacy_polygons" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id47">
<span class="sig-name descname"><span class="pre">user_metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id47" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="kraken-lib-xml-module">
<h3>kraken.lib.xml module<a class="headerlink" href="#kraken-lib-xml-module" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.xml.XMLPage">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.xml.</span></span><span class="sig-name descname"><span class="pre">XMLPage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'baselines'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.xml.XMLPage" title="Link to this definition">¶</a></dt>
<dd><p>Parses XML facsimiles in ALTO or PageXML format.</p>
<p>The parser is able to deal with most (but not all) features supported by
those standards. In particular, any data below the line level is discarded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>os.PathLike</em><em>]</em>) – Path to the XML file</p></li>
<li><p><strong>filetype</strong> (<em>Literal</em><em>[</em><em>'xml'</em><em>, </em><em>'alto'</em><em>, </em><em>'page'</em><em>]</em>) – Selector for explicit subparser choice.</p></li>
<li><p><strong>linetype</strong> (<em>Literal</em><em>[</em><em>'baselines'</em><em>, </em><em>'bbox'</em><em>]</em>) – Parse line data as baselines or bounding box type.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="training">
<h2>Training<a class="headerlink" href="#training" title="Link to this heading">¶</a></h2>
<section id="kraken-lib-train-module">
<h3>kraken.lib.train module<a class="headerlink" href="#kraken-lib-train-module" title="Link to this heading">¶</a></h3>
</section>
<section id="loss-and-evaluation-functions">
<h3>Loss and Evaluation Functions<a class="headerlink" href="#loss-and-evaluation-functions" title="Link to this heading">¶</a></h3>
</section>
<section id="trainer">
<h3>Trainer<a class="headerlink" href="#trainer" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.train.KrakenTrainer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.train.</span></span><span class="sig-name descname"><span class="pre">KrakenTrainer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enable_progress_bar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_summary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_epochs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_epochs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeze_backbone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pl_logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.train.KrakenTrainer" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enable_progress_bar</strong> (<em>bool</em>)</p></li>
<li><p><strong>enable_summary</strong> (<em>bool</em>)</p></li>
<li><p><strong>min_epochs</strong> (<em>int</em>)</p></li>
<li><p><strong>max_epochs</strong> (<em>int</em>)</p></li>
<li><p><strong>pl_logger</strong> (<em>Union</em><em>[</em><em>lightning.pytorch.loggers.logger.Logger</em><em>, </em><em>str</em><em>, </em><em>None</em><em>]</em>)</p></li>
<li><p><strong>log_dir</strong> (<em>Optional</em><em>[</em><em>os.PathLike</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.train.KrakenTrainer.automatic_optimization">
<span class="sig-name descname"><span class="pre">automatic_optimization</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#kraken.lib.train.KrakenTrainer.automatic_optimization" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.train.KrakenTrainer.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.train.KrakenTrainer.fit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="kraken-lib-dataset-module">
<h3>kraken.lib.dataset module<a class="headerlink" href="#kraken-lib-dataset-module" title="Link to this heading">¶</a></h3>
<section id="recognition-datasets">
<h4>Recognition datasets<a class="headerlink" href="#recognition-datasets" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">ArrowIPCRecognitionDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_empty_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im_transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">transforms.Compose([])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augmentation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset" title="Link to this definition">¶</a></dt>
<dd><p>Dataset for training a recognition model from a precompiled dataset in
Arrow IPC format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>normalization</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>whitespace_normalization</strong> (<em>bool</em>)</p></li>
<li><p><strong>skip_empty_lines</strong> (<em>bool</em>)</p></li>
<li><p><strong>reorder</strong> (<em>Union</em><em>[</em><em>bool</em><em>, </em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>im_transforms</strong> (<em>Callable</em><em>[</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>torch.Tensor</em><em>]</em>)</p></li>
<li><p><strong>augmentation</strong> (<em>bool</em>)</p></li>
<li><p><strong>split_filter</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.add" title="Link to this definition">¶</a></dt>
<dd><p>Adds an Arrow IPC file to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>os.PathLike</em><em>]</em>) – Location of the precompiled dataset file.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.alphabet">
<span class="sig-name descname"><span class="pre">alphabet</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">collections.Counter</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.alphabet" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.arrow_table">
<span class="sig-name descname"><span class="pre">arrow_table</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.arrow_table" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.aug">
<span class="sig-name descname"><span class="pre">aug</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.aug" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.codec">
<span class="sig-name descname"><span class="pre">codec</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.codec" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.encode" title="Link to this definition">¶</a></dt>
<dd><p>Adds a codec to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>codec</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec"><em>kraken.lib.codec.PytorchCodec</em></a><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.failed_samples">
<span class="sig-name descname"><span class="pre">failed_samples</span></span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.failed_samples" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.im_mode">
<span class="sig-name descname"><span class="pre">im_mode</span></span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.im_mode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.legacy_polygons_status">
<span class="sig-name descname"><span class="pre">legacy_polygons_status</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.legacy_polygons_status" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.no_encode">
<span class="sig-name descname"><span class="pre">no_encode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.no_encode" title="Link to this definition">¶</a></dt>
<dd><p>Creates an unencoded dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.rebuild_alphabet">
<span class="sig-name descname"><span class="pre">rebuild_alphabet</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.rebuild_alphabet" title="Link to this definition">¶</a></dt>
<dd><p>Recomputes the alphabet depending on the given text transformation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.seg_type">
<span class="sig-name descname"><span class="pre">seg_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.seg_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.skip_empty_lines">
<span class="sig-name descname"><span class="pre">skip_empty_lines</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.skip_empty_lines" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.text_transforms">
<span class="sig-name descname"><span class="pre">text_transforms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.text_transforms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.ArrowIPCRecognitionDataset.transforms">
<span class="sig-name descname"><span class="pre">transforms</span></span><a class="headerlink" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.transforms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">BaselineSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im_transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">transforms.Compose([])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augmentation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_baselines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_baselines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_all_baselines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_all_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.BaselineSet" title="Link to this definition">¶</a></dt>
<dd><p>Dataset for training a baseline/region segmentation model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line_width</strong> (<em>int</em>)</p></li>
<li><p><strong>padding</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em>)</p></li>
<li><p><strong>im_transforms</strong> (<em>Callable</em><em>[</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>torch.Tensor</em><em>]</em>)</p></li>
<li><p><strong>augmentation</strong> (<em>bool</em>)</p></li>
<li><p><strong>valid_baselines</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>merge_baselines</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>merge_all_baselines</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>valid_regions</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>merge_regions</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>merge_all_regions</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>class_mapping</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.add" title="Link to this definition">¶</a></dt>
<dd><p>Adds a page to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>doc</strong> (<a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a>) – A Segmentation container class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.aug">
<span class="sig-name descname"><span class="pre">aug</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.aug" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.class_stats">
<span class="sig-name descname"><span class="pre">class_stats</span></span><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.class_stats" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.failed_samples">
<span class="sig-name descname"><span class="pre">failed_samples</span></span><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.failed_samples" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.im_mode">
<span class="sig-name descname"><span class="pre">im_mode</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'1'</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.im_mode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.imgs">
<span class="sig-name descname"><span class="pre">imgs</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.imgs" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.line_width">
<span class="sig-name descname"><span class="pre">line_width</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.line_width" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.mbl_dict">
<span class="sig-name descname"><span class="pre">mbl_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.mbl_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.merge_all_baselines">
<span class="sig-name descname"><span class="pre">merge_all_baselines</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.merge_all_baselines" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.merge_all_regions">
<span class="sig-name descname"><span class="pre">merge_all_regions</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.merge_all_regions" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.mreg_dict">
<span class="sig-name descname"><span class="pre">mreg_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.mreg_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.pad">
<span class="sig-name descname"><span class="pre">pad</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0)</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.pad" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.seg_type">
<span class="sig-name descname"><span class="pre">seg_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.seg_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.targets">
<span class="sig-name descname"><span class="pre">targets</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.targets" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.transform" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.transforms">
<span class="sig-name descname"><span class="pre">transforms</span></span><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.transforms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.valid_baselines">
<span class="sig-name descname"><span class="pre">valid_baselines</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.valid_baselines" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.BaselineSet.valid_regions">
<span class="sig-name descname"><span class="pre">valid_regions</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.BaselineSet.valid_regions" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">GroundTruthDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_empty_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im_transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">transforms.Compose([])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augmentation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset" title="Link to this definition">¶</a></dt>
<dd><p>Dataset for training a line recognition model.</p>
<p>All data is cached in memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>normalization</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>whitespace_normalization</strong> (<em>bool</em>)</p></li>
<li><p><strong>skip_empty_lines</strong> (<em>bool</em>)</p></li>
<li><p><strong>reorder</strong> (<em>Union</em><em>[</em><em>bool</em><em>, </em><em>str</em><em>]</em>)</p></li>
<li><p><strong>im_transforms</strong> (<em>Callable</em><em>[</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>torch.Tensor</em><em>]</em>)</p></li>
<li><p><strong>augmentation</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.add" title="Link to this definition">¶</a></dt>
<dd><p>Adds an individual line or all lines on a page to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#kraken.containers.BBoxLine" title="kraken.containers.BBoxLine"><em>kraken.containers.BBoxLine</em></a><em>]</em>) – BBoxLine container object of a line.</p></li>
<li><p><strong>page</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a><em>]</em>) – Segmentation container object for a page.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.add_line">
<span class="sig-name descname"><span class="pre">add_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.add_line" title="Link to this definition">¶</a></dt>
<dd><p>Adds a line to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>line</strong> (<a class="reference internal" href="#kraken.containers.BBoxLine" title="kraken.containers.BBoxLine"><em>kraken.containers.BBoxLine</em></a>) – BBoxLine container object for a line.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError if the transcription</strong><strong> of </strong><strong>the line is empty after</strong> – </p></li>
<li><p><strong>transformation</strong><strong> or </strong><strong>either baseline</strong><strong> or </strong><strong>bounding polygon are missing.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.add_page">
<span class="sig-name descname"><span class="pre">add_page</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">page</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.add_page" title="Link to this definition">¶</a></dt>
<dd><p>Adds all lines on a page to the dataset.</p>
<p>Invalid lines will be skipped and a warning will be printed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>page</strong> (<a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a>) – Segmentation container object for a page.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.alphabet">
<span class="sig-name descname"><span class="pre">alphabet</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">collections.Counter</span></em><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.alphabet" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.aug">
<span class="sig-name descname"><span class="pre">aug</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.aug" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.encode" title="Link to this definition">¶</a></dt>
<dd><p>Adds a codec to the dataset and encodes all text lines.</p>
<p>Has to be run before sampling from the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>codec</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec"><em>kraken.lib.codec.PytorchCodec</em></a><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.failed_samples">
<span class="sig-name descname"><span class="pre">failed_samples</span></span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.failed_samples" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.im_mode">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">im_mode</span></span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.im_mode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.no_encode">
<span class="sig-name descname"><span class="pre">no_encode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.no_encode" title="Link to this definition">¶</a></dt>
<dd><p>Creates an unencoded dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.seg_type">
<span class="sig-name descname"><span class="pre">seg_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'bbox'</span></em><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.seg_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.skip_empty_lines">
<span class="sig-name descname"><span class="pre">skip_empty_lines</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.skip_empty_lines" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.text_transforms">
<span class="sig-name descname"><span class="pre">text_transforms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.text_transforms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.GroundTruthDataset.transforms">
<span class="sig-name descname"><span class="pre">transforms</span></span><a class="headerlink" href="#kraken.lib.dataset.GroundTruthDataset.transforms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="segmentation-datasets">
<h4>Segmentation datasets<a class="headerlink" href="#segmentation-datasets" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">PolygonGTDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whitespace_normalization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_empty_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">im_transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">transforms.Compose([])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augmentation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legacy_polygons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset" title="Link to this definition">¶</a></dt>
<dd><p>Dataset for training a line recognition model from polygonal/baseline data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>normalization</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>whitespace_normalization</strong> (<em>bool</em>)</p></li>
<li><p><strong>skip_empty_lines</strong> (<em>bool</em>)</p></li>
<li><p><strong>reorder</strong> (<em>Union</em><em>[</em><em>bool</em><em>, </em><em>Literal</em><em>[</em><em>'L'</em><em>, </em><em>'R'</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>im_transforms</strong> (<em>Callable</em><em>[</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>torch.Tensor</em><em>]</em>)</p></li>
<li><p><strong>augmentation</strong> (<em>bool</em>)</p></li>
<li><p><strong>legacy_polygons</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.add" title="Link to this definition">¶</a></dt>
<dd><p>Adds an individual line or all lines on a page to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#kraken.containers.BaselineLine" title="kraken.containers.BaselineLine"><em>kraken.containers.BaselineLine</em></a><em>]</em>) – BaselineLine container object of a line.</p></li>
<li><p><strong>page</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a><em>]</em>) – Segmentation container object for a page.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.add_line">
<span class="sig-name descname"><span class="pre">add_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.add_line" title="Link to this definition">¶</a></dt>
<dd><p>Adds a line to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>line</strong> (<a class="reference internal" href="#kraken.containers.BaselineLine" title="kraken.containers.BaselineLine"><em>kraken.containers.BaselineLine</em></a>) – BaselineLine container object for a line.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError if the transcription</strong><strong> of </strong><strong>the line is empty after</strong> – </p></li>
<li><p><strong>transformation</strong><strong> or </strong><strong>either baseline</strong><strong> or </strong><strong>bounding polygon are missing.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.add_page">
<span class="sig-name descname"><span class="pre">add_page</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">page</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.add_page" title="Link to this definition">¶</a></dt>
<dd><p>Adds all lines on a page to the dataset.</p>
<p>Invalid lines will be skipped and a warning will be printed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>page</strong> (<a class="reference internal" href="#kraken.containers.Segmentation" title="kraken.containers.Segmentation"><em>kraken.containers.Segmentation</em></a>) – Segmentation container object for a page.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.alphabet">
<span class="sig-name descname"><span class="pre">alphabet</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">collections.Counter</span></em><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.alphabet" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.aug">
<span class="sig-name descname"><span class="pre">aug</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.aug" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.encode" title="Link to this definition">¶</a></dt>
<dd><p>Adds a codec to the dataset and encodes all text lines.</p>
<p>Has to be run before sampling from the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>codec</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#kraken.lib.codec.PytorchCodec" title="kraken.lib.codec.PytorchCodec"><em>kraken.lib.codec.PytorchCodec</em></a><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.failed_samples">
<span class="sig-name descname"><span class="pre">failed_samples</span></span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.failed_samples" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.im_mode">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">im_mode</span></span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.im_mode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.legacy_polygons">
<span class="sig-name descname"><span class="pre">legacy_polygons</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.legacy_polygons" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.no_encode">
<span class="sig-name descname"><span class="pre">no_encode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.no_encode" title="Link to this definition">¶</a></dt>
<dd><p>Creates an unencoded dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.seg_type">
<span class="sig-name descname"><span class="pre">seg_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'baselines'</span></em><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.seg_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.skip_empty_lines">
<span class="sig-name descname"><span class="pre">skip_empty_lines</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.skip_empty_lines" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.text_transforms">
<span class="sig-name descname"><span class="pre">text_transforms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.text_transforms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PolygonGTDataset.transforms">
<span class="sig-name descname"><span class="pre">transforms</span></span><a class="headerlink" href="#kraken.lib.dataset.PolygonGTDataset.transforms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="reading-order-datasets">
<h4>Reading order datasets<a class="headerlink" href="#reading-order-datasets" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.dataset.PairWiseROSet">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">PairWiseROSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'baselines'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ro_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_entities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_entities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_all_entities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PairWiseROSet" title="Link to this definition">¶</a></dt>
<dd><p>Dataset for training a reading order determination model.</p>
<p>Returns random pairs of lines from the same page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>os.PathLike</em><em>, </em><em>str</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>mode</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'alto'</em><em>, </em><em>'page'</em><em>, </em><em>'xml'</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>level</strong> (<em>Literal</em><em>[</em><em>'regions'</em><em>, </em><em>'baselines'</em><em>]</em>)</p></li>
<li><p><strong>ro_id</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>valid_entities</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>merge_entities</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>merge_all_entities</strong> (<em>bool</em>)</p></li>
<li><p><strong>class_mapping</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PairWiseROSet.data">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.PairWiseROSet.data" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PairWiseROSet.failed_samples">
<span class="sig-name descname"><span class="pre">failed_samples</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.PairWiseROSet.failed_samples" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.PairWiseROSet.get_feature_dim">
<span class="sig-name descname"><span class="pre">get_feature_dim</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PairWiseROSet.get_feature_dim" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PairWiseROSet.m_dict">
<span class="sig-name descname"><span class="pre">m_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.PairWiseROSet.m_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PairWiseROSet.merge_all_entities">
<span class="sig-name descname"><span class="pre">merge_all_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#kraken.lib.dataset.PairWiseROSet.merge_all_entities" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PairWiseROSet.valid_entities">
<span class="sig-name descname"><span class="pre">valid_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.PairWiseROSet.valid_entities" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.dataset.PageWiseROSet">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">PageWiseROSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'baselines'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ro_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_entities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_entities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_all_entities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_mapping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PageWiseROSet" title="Link to this definition">¶</a></dt>
<dd><p>Dataset for training a reading order determination model.</p>
<p>Returns all lines from the same page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>os.PathLike</em><em>, </em><em>str</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>mode</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'alto'</em><em>, </em><em>'page'</em><em>, </em><em>'xml'</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>level</strong> (<em>Literal</em><em>[</em><em>'regions'</em><em>, </em><em>'baselines'</em><em>]</em>)</p></li>
<li><p><strong>ro_id</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>valid_entities</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>merge_entities</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>merge_all_entities</strong> (<em>bool</em>)</p></li>
<li><p><strong>class_mapping</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PageWiseROSet.data">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.PageWiseROSet.data" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PageWiseROSet.failed_samples">
<span class="sig-name descname"><span class="pre">failed_samples</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#kraken.lib.dataset.PageWiseROSet.failed_samples" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kraken.lib.dataset.PageWiseROSet.get_feature_dim">
<span class="sig-name descname"><span class="pre">get_feature_dim</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.PageWiseROSet.get_feature_dim" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PageWiseROSet.m_dict">
<span class="sig-name descname"><span class="pre">m_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.PageWiseROSet.m_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PageWiseROSet.merge_all_entities">
<span class="sig-name descname"><span class="pre">merge_all_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#kraken.lib.dataset.PageWiseROSet.merge_all_entities" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kraken.lib.dataset.PageWiseROSet.valid_entities">
<span class="sig-name descname"><span class="pre">valid_entities</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#kraken.lib.dataset.PageWiseROSet.valid_entities" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="helpers">
<h4>Helpers<a class="headerlink" href="#helpers" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">ImageInputTransforms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_binarization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>batch</strong> (<em>int</em>)</p></li>
<li><p><strong>height</strong> (<em>int</em>)</p></li>
<li><p><strong>width</strong> (<em>int</em>)</p></li>
<li><p><strong>channels</strong> (<em>int</em>)</p></li>
<li><p><strong>pad</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>valid_norm</strong> (<em>bool</em>)</p></li>
<li><p><strong>force_binarization</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.batch">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.batch" title="Link to this definition">¶</a></dt>
<dd><p>Batch size attribute. Ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.centerline_norm">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">centerline_norm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.centerline_norm" title="Link to this definition">¶</a></dt>
<dd><p>Attribute indicating if centerline normalization will be applied to
input images.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.channels">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">channels</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.channels" title="Link to this definition">¶</a></dt>
<dd><p>Channels attribute. Can be either 1 (binary/grayscale), 3 (RGB).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.force_binarization">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">force_binarization</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.force_binarization" title="Link to this definition">¶</a></dt>
<dd><p>Switch enabling/disabling forced binarization.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.height">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">height</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.height" title="Link to this definition">¶</a></dt>
<dd><p>Desired output image height. If set to 0, image will be rescaled
proportionally with width, if 1 and <cite>channels</cite> is larger than 3 output
will be grayscale and of the height set with the channels attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.mode">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.mode" title="Link to this definition">¶</a></dt>
<dd><p>Imaginary PIL.Image.Image mode of the output tensor. Possible values
are RGB, L, and 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.pad">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pad</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.pad" title="Link to this definition">¶</a></dt>
<dd><p>Amount of padding around left/right end of image.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.scale">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scale</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.scale" title="Link to this definition">¶</a></dt>
<dd><p>Desired output shape (height, width) of the image. If any value is set
to 0, image will be rescaled proportionally with height, width, if 1
and <cite>channels</cite> is larger than 3 output will be grayscale and of the
height set with the channels attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[int, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.valid_norm">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">valid_norm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.valid_norm" title="Link to this definition">¶</a></dt>
<dd><p>Switch allowing/disallowing centerline normalization. Even if enabled
won’t be applied to 3-channel images.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="kraken.lib.dataset.ImageInputTransforms.width">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">width</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#kraken.lib.dataset.ImageInputTransforms.width" title="Link to this definition">¶</a></dt>
<dd><p>Desired output image width. If set to 0, image will be rescaled
proportionally with height.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.dataset.collate_sequences">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">collate_sequences</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.collate_sequences" title="Link to this definition">¶</a></dt>
<dd><p>Sorts and pads sequences.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.dataset.global_align">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">global_align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seq2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.global_align" title="Link to this definition">¶</a></dt>
<dd><p>Computes a global alignment of two strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seq1</strong> (<em>Sequence</em><em>[</em><em>Any</em><em>]</em>)</p></li>
<li><p><strong>seq2</strong> (<em>Sequence</em><em>[</em><em>Any</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[int, List[str], List[str]]</p>
</dd>
</dl>
<p>Returns a tuple (distance, list(algn1), list(algn2))</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kraken.lib.dataset.compute_confusions">
<span class="sig-prename descclassname"><span class="pre">kraken.lib.dataset.</span></span><span class="sig-name descname"><span class="pre">compute_confusions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algn1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algn2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.lib.dataset.compute_confusions" title="Link to this definition">¶</a></dt>
<dd><p>Compute confusion matrices from two globally aligned strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>align1</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>) – sequence 1</p></li>
<li><p><strong>align2</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>) – sequence 2</p></li>
<li><p><strong>algn1</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>algn2</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple (counts, scripts, ins, dels, subs) with <cite>counts</cite> being per-character
confusions, <cite>scripts</cite> per-script counts, <cite>ins</cite> a dict with per script
insertions, <cite>del</cite> an integer of the number of deletions, <cite>subs</cite> per
script substitutions.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>
<section id="legacy-modules">
<h2>Legacy modules<a class="headerlink" href="#legacy-modules" title="Link to this heading">¶</a></h2>
<p>These modules are retained for compatibility reasons or highly specialized use
cases. In most cases their use is not necessary and they aren’t further
developed for interoperability with new functionality, e.g. the transcription
and line generation modules do not work with the baseline segmenter.</p>
<section id="kraken-binarization-module">
<h3>kraken.binarization module<a class="headerlink" href="#kraken-binarization-module" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="kraken.binarization.nlbin">
<span class="sig-prename descclassname"><span class="pre">kraken.binarization.</span></span><span class="sig-name descname"><span class="pre">nlbin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">80</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">90</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kraken.binarization.nlbin" title="Link to this definition">¶</a></dt>
<dd><p>Performs binarization using non-linear processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im</strong> (<em>PIL.Image.Image</em>) – Input image</p></li>
<li><p><strong>threshold</strong> (<em>float</em>)</p></li>
<li><p><strong>zoom</strong> (<em>float</em>) – Zoom for background page estimation</p></li>
<li><p><strong>escale</strong> (<em>float</em>) – Scale for estimating a mask over the text region</p></li>
<li><p><strong>border</strong> (<em>float</em>) – Ignore this much of the border</p></li>
<li><p><strong>perc</strong> (<em>int</em>) – Percentage for filters</p></li>
<li><p><strong>range</strong> (<em>int</em>) – Range for filters</p></li>
<li><p><strong>low</strong> (<em>int</em>) – Percentile for black estimation</p></li>
<li><p><strong>high</strong> (<em>int</em>) – Percentile for white estimation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>PIL.Image.Image containing the binarized image</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#kraken.lib.exceptions.KrakenInputException" title="kraken.lib.exceptions.KrakenInputException"><strong>KrakenInputException</strong></a> – When trying to binarize an empty image.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>PIL.Image.Image</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="kraken-transcribe-module">
<h3>kraken.transcribe module<a class="headerlink" href="#kraken-transcribe-module" title="Link to this heading">¶</a></h3>
</section>
<section id="kraken-linegen-module">
<h3>kraken.linegen module<a class="headerlink" href="#kraken-linegen-module" title="Link to this heading">¶</a></h3>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/kraken.png" alt="Logo of kraken"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">API Reference</a><ul>
<li><a class="reference internal" href="#segmentation">Segmentation</a><ul>
<li><a class="reference internal" href="#kraken-blla-module">kraken.blla module</a><ul>
<li><a class="reference internal" href="#kraken.blla.segment"><code class="docutils literal notranslate"><span class="pre">segment()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-pageseg-module">kraken.pageseg module</a><ul>
<li><a class="reference internal" href="#kraken.pageseg.segment"><code class="docutils literal notranslate"><span class="pre">segment()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#recognition">Recognition</a><ul>
<li><a class="reference internal" href="#kraken-rpred-module">kraken.rpred module</a><ul>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred"><code class="docutils literal notranslate"><span class="pre">mm_rpred</span></code></a><ul>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.bidi_reordering"><code class="docutils literal notranslate"><span class="pre">mm_rpred.bidi_reordering</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.bounds"><code class="docutils literal notranslate"><span class="pre">mm_rpred.bounds</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.im"><code class="docutils literal notranslate"><span class="pre">mm_rpred.im</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.len"><code class="docutils literal notranslate"><span class="pre">mm_rpred.len</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.line_iter"><code class="docutils literal notranslate"><span class="pre">mm_rpred.line_iter</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.nets"><code class="docutils literal notranslate"><span class="pre">mm_rpred.nets</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.no_legacy_polygons"><code class="docutils literal notranslate"><span class="pre">mm_rpred.no_legacy_polygons</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.pad"><code class="docutils literal notranslate"><span class="pre">mm_rpred.pad</span></code></a></li>
<li><a class="reference internal" href="#kraken.rpred.mm_rpred.tags_ignore"><code class="docutils literal notranslate"><span class="pre">mm_rpred.tags_ignore</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.rpred.rpred"><code class="docutils literal notranslate"><span class="pre">rpred()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#serialization">Serialization</a><ul>
<li><a class="reference internal" href="#kraken-serialization-module">kraken.serialization module</a><ul>
<li><a class="reference internal" href="#kraken.serialization.render_report"><code class="docutils literal notranslate"><span class="pre">render_report()</span></code></a></li>
<li><a class="reference internal" href="#kraken.serialization.serialize"><code class="docutils literal notranslate"><span class="pre">serialize()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#default-templates">Default templates</a><ul>
<li><a class="reference internal" href="#alto-4-4">ALTO 4.4</a></li>
<li><a class="reference internal" href="#pagexml">PageXML</a></li>
<li><a class="reference internal" href="#hocr">hOCR</a></li>
<li><a class="reference internal" href="#abbyy-xml">ABBYY XML</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#containers-and-helpers">Containers and Helpers</a><ul>
<li><a class="reference internal" href="#kraken-lib-codec-module">kraken.lib.codec module</a><ul>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec"><code class="docutils literal notranslate"><span class="pre">PytorchCodec</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.add_labels"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.add_labels()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.c_sorted"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.c_sorted</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.decode"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.decode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.encode"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.encode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.is_valid"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.is_valid</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.l2c"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.l2c</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.l2c_single"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.l2c_single</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.max_label"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.max_label</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.merge"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.merge()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.codec.PytorchCodec.strict"><code class="docutils literal notranslate"><span class="pre">PytorchCodec.strict</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-containers-module">kraken.containers module</a><ul>
<li><a class="reference internal" href="#kraken.containers.Segmentation"><code class="docutils literal notranslate"><span class="pre">Segmentation</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.Segmentation.type"><code class="docutils literal notranslate"><span class="pre">Segmentation.type</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Segmentation.imagename"><code class="docutils literal notranslate"><span class="pre">Segmentation.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Segmentation.text_direction"><code class="docutils literal notranslate"><span class="pre">Segmentation.text_direction</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Segmentation.script_detection"><code class="docutils literal notranslate"><span class="pre">Segmentation.script_detection</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Segmentation.lines"><code class="docutils literal notranslate"><span class="pre">Segmentation.lines</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Segmentation.regions"><code class="docutils literal notranslate"><span class="pre">Segmentation.regions</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Segmentation.line_orders"><code class="docutils literal notranslate"><span class="pre">Segmentation.line_orders</span></code></a></li>
<li><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">Segmentation.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Segmentation.language"><code class="docutils literal notranslate"><span class="pre">Segmentation.language</span></code></a></li>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">Segmentation.line_orders</span></code></a></li>
<li><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">Segmentation.lines</span></code></a></li>
<li><a class="reference internal" href="#id3"><code class="docutils literal notranslate"><span class="pre">Segmentation.regions</span></code></a></li>
<li><a class="reference internal" href="#id4"><code class="docutils literal notranslate"><span class="pre">Segmentation.script_detection</span></code></a></li>
<li><a class="reference internal" href="#id5"><code class="docutils literal notranslate"><span class="pre">Segmentation.text_direction</span></code></a></li>
<li><a class="reference internal" href="#id6"><code class="docutils literal notranslate"><span class="pre">Segmentation.type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine"><code class="docutils literal notranslate"><span class="pre">BaselineLine</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.id"><code class="docutils literal notranslate"><span class="pre">BaselineLine.id</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.baseline"><code class="docutils literal notranslate"><span class="pre">BaselineLine.baseline</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.boundary"><code class="docutils literal notranslate"><span class="pre">BaselineLine.boundary</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.text"><code class="docutils literal notranslate"><span class="pre">BaselineLine.text</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.base_dir"><code class="docutils literal notranslate"><span class="pre">BaselineLine.base_dir</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.imagename"><code class="docutils literal notranslate"><span class="pre">BaselineLine.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.tags"><code class="docutils literal notranslate"><span class="pre">BaselineLine.tags</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.split"><code class="docutils literal notranslate"><span class="pre">BaselineLine.split</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.regions"><code class="docutils literal notranslate"><span class="pre">BaselineLine.regions</span></code></a></li>
<li><a class="reference internal" href="#id7"><code class="docutils literal notranslate"><span class="pre">BaselineLine.base_dir</span></code></a></li>
<li><a class="reference internal" href="#id8"><code class="docutils literal notranslate"><span class="pre">BaselineLine.baseline</span></code></a></li>
<li><a class="reference internal" href="#id9"><code class="docutils literal notranslate"><span class="pre">BaselineLine.boundary</span></code></a></li>
<li><a class="reference internal" href="#id10"><code class="docutils literal notranslate"><span class="pre">BaselineLine.id</span></code></a></li>
<li><a class="reference internal" href="#id11"><code class="docutils literal notranslate"><span class="pre">BaselineLine.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.language"><code class="docutils literal notranslate"><span class="pre">BaselineLine.language</span></code></a></li>
<li><a class="reference internal" href="#id12"><code class="docutils literal notranslate"><span class="pre">BaselineLine.regions</span></code></a></li>
<li><a class="reference internal" href="#id13"><code class="docutils literal notranslate"><span class="pre">BaselineLine.split</span></code></a></li>
<li><a class="reference internal" href="#id14"><code class="docutils literal notranslate"><span class="pre">BaselineLine.tags</span></code></a></li>
<li><a class="reference internal" href="#id15"><code class="docutils literal notranslate"><span class="pre">BaselineLine.text</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineLine.type"><code class="docutils literal notranslate"><span class="pre">BaselineLine.type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine"><code class="docutils literal notranslate"><span class="pre">BBoxLine</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.id"><code class="docutils literal notranslate"><span class="pre">BBoxLine.id</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.bbox"><code class="docutils literal notranslate"><span class="pre">BBoxLine.bbox</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.text"><code class="docutils literal notranslate"><span class="pre">BBoxLine.text</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.base_dir"><code class="docutils literal notranslate"><span class="pre">BBoxLine.base_dir</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.imagename"><code class="docutils literal notranslate"><span class="pre">BBoxLine.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.tags"><code class="docutils literal notranslate"><span class="pre">BBoxLine.tags</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.split"><code class="docutils literal notranslate"><span class="pre">BBoxLine.split</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.regions"><code class="docutils literal notranslate"><span class="pre">BBoxLine.regions</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.text_direction"><code class="docutils literal notranslate"><span class="pre">BBoxLine.text_direction</span></code></a></li>
<li><a class="reference internal" href="#id16"><code class="docutils literal notranslate"><span class="pre">BBoxLine.base_dir</span></code></a></li>
<li><a class="reference internal" href="#id17"><code class="docutils literal notranslate"><span class="pre">BBoxLine.bbox</span></code></a></li>
<li><a class="reference internal" href="#id18"><code class="docutils literal notranslate"><span class="pre">BBoxLine.id</span></code></a></li>
<li><a class="reference internal" href="#id19"><code class="docutils literal notranslate"><span class="pre">BBoxLine.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.language"><code class="docutils literal notranslate"><span class="pre">BBoxLine.language</span></code></a></li>
<li><a class="reference internal" href="#id20"><code class="docutils literal notranslate"><span class="pre">BBoxLine.regions</span></code></a></li>
<li><a class="reference internal" href="#id21"><code class="docutils literal notranslate"><span class="pre">BBoxLine.split</span></code></a></li>
<li><a class="reference internal" href="#id22"><code class="docutils literal notranslate"><span class="pre">BBoxLine.tags</span></code></a></li>
<li><a class="reference internal" href="#id23"><code class="docutils literal notranslate"><span class="pre">BBoxLine.text</span></code></a></li>
<li><a class="reference internal" href="#id24"><code class="docutils literal notranslate"><span class="pre">BBoxLine.text_direction</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxLine.type"><code class="docutils literal notranslate"><span class="pre">BBoxLine.type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.containers.Region"><code class="docutils literal notranslate"><span class="pre">Region</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.Region.id"><code class="docutils literal notranslate"><span class="pre">Region.id</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Region.boundary"><code class="docutils literal notranslate"><span class="pre">Region.boundary</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Region.imagename"><code class="docutils literal notranslate"><span class="pre">Region.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Region.tags"><code class="docutils literal notranslate"><span class="pre">Region.tags</span></code></a></li>
<li><a class="reference internal" href="#id25"><code class="docutils literal notranslate"><span class="pre">Region.boundary</span></code></a></li>
<li><a class="reference internal" href="#id26"><code class="docutils literal notranslate"><span class="pre">Region.id</span></code></a></li>
<li><a class="reference internal" href="#id27"><code class="docutils literal notranslate"><span class="pre">Region.imagename</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.Region.language"><code class="docutils literal notranslate"><span class="pre">Region.language</span></code></a></li>
<li><a class="reference internal" href="#id28"><code class="docutils literal notranslate"><span class="pre">Region.tags</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.containers.ocr_record"><code class="docutils literal notranslate"><span class="pre">ocr_record</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.ocr_record.base_dir"><code class="docutils literal notranslate"><span class="pre">ocr_record.base_dir</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ocr_record.confidences"><code class="docutils literal notranslate"><span class="pre">ocr_record.confidences</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ocr_record.cuts"><code class="docutils literal notranslate"><span class="pre">ocr_record.cuts</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ocr_record.display_order"><code class="docutils literal notranslate"><span class="pre">ocr_record.display_order()</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ocr_record.logical_order"><code class="docutils literal notranslate"><span class="pre">ocr_record.logical_order()</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ocr_record.prediction"><code class="docutils literal notranslate"><span class="pre">ocr_record.prediction</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ocr_record.type"><code class="docutils literal notranslate"><span class="pre">ocr_record.type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord.type"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.type</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord.prediction"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.prediction</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord.cuts"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.cuts</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord.confidences"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.confidences</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord.base_dir"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.base_dir</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord.display_order"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.display_order</span></code></a></li>
<li><a class="reference internal" href="#id29"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.base_dir</span></code></a></li>
<li><a class="reference internal" href="#id30"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.cuts</span></code></a></li>
<li><a class="reference internal" href="#id31"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.display_order()</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BaselineOCRRecord.logical_order"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.logical_order()</span></code></a></li>
<li><a class="reference internal" href="#id32"><code class="docutils literal notranslate"><span class="pre">BaselineOCRRecord.type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord.type"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.type</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord.prediction"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.prediction</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord.cuts"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.cuts</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord.confidences"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.confidences</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord.base_dir"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.base_dir</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord.display_order"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.display_order</span></code></a></li>
<li><a class="reference internal" href="#id33"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.base_dir</span></code></a></li>
<li><a class="reference internal" href="#id34"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.display_order()</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.BBoxOCRRecord.logical_order"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.logical_order()</span></code></a></li>
<li><a class="reference internal" href="#id35"><code class="docutils literal notranslate"><span class="pre">BBoxOCRRecord.type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.containers.ProcessingStep"><code class="docutils literal notranslate"><span class="pre">ProcessingStep</span></code></a><ul>
<li><a class="reference internal" href="#kraken.containers.ProcessingStep.id"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.id</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ProcessingStep.category"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.category</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ProcessingStep.description"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.description</span></code></a></li>
<li><a class="reference internal" href="#kraken.containers.ProcessingStep.settings"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.settings</span></code></a></li>
<li><a class="reference internal" href="#id36"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.category</span></code></a></li>
<li><a class="reference internal" href="#id37"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.description</span></code></a></li>
<li><a class="reference internal" href="#id38"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.id</span></code></a></li>
<li><a class="reference internal" href="#id39"><code class="docutils literal notranslate"><span class="pre">ProcessingStep.settings</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-lib-ctc-decoder">kraken.lib.ctc_decoder</a><ul>
<li><a class="reference internal" href="#kraken.lib.ctc_decoder.beam_decoder"><code class="docutils literal notranslate"><span class="pre">beam_decoder()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.ctc_decoder.greedy_decoder"><code class="docutils literal notranslate"><span class="pre">greedy_decoder()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.ctc_decoder.blank_threshold_decoder"><code class="docutils literal notranslate"><span class="pre">blank_threshold_decoder()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-lib-exceptions">kraken.lib.exceptions</a><ul>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenCodecException"><code class="docutils literal notranslate"><span class="pre">KrakenCodecException</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenStopTrainingException"><code class="docutils literal notranslate"><span class="pre">KrakenStopTrainingException</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenEncodeException"><code class="docutils literal notranslate"><span class="pre">KrakenEncodeException</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenRecordException"><code class="docutils literal notranslate"><span class="pre">KrakenRecordException</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenInvalidModelException"><code class="docutils literal notranslate"><span class="pre">KrakenInvalidModelException</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenInputException"><code class="docutils literal notranslate"><span class="pre">KrakenInputException</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenRepoException"><code class="docutils literal notranslate"><span class="pre">KrakenRepoException</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenCairoSurfaceException"><code class="docutils literal notranslate"><span class="pre">KrakenCairoSurfaceException</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenCairoSurfaceException.message"><code class="docutils literal notranslate"><span class="pre">KrakenCairoSurfaceException.message</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenCairoSurfaceException.width"><code class="docutils literal notranslate"><span class="pre">KrakenCairoSurfaceException.width</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.exceptions.KrakenCairoSurfaceException.height"><code class="docutils literal notranslate"><span class="pre">KrakenCairoSurfaceException.height</span></code></a></li>
<li><a class="reference internal" href="#id40"><code class="docutils literal notranslate"><span class="pre">KrakenCairoSurfaceException.height</span></code></a></li>
<li><a class="reference internal" href="#id41"><code class="docutils literal notranslate"><span class="pre">KrakenCairoSurfaceException.message</span></code></a></li>
<li><a class="reference internal" href="#id42"><code class="docutils literal notranslate"><span class="pre">KrakenCairoSurfaceException.width</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-lib-models-module">kraken.lib.models module</a><ul>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.codec"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.codec</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.decoder"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.decoder</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.device"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.device</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.forward"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.forward()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.kind"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.kind</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.nn"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.nn</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.one_channel_mode"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.one_channel_mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.predict"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.predict()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.predict_labels"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.predict_labels()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.predict_string"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.predict_string()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.seg_type"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.seg_type</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.temperature"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.temperature</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.to"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.to()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.models.TorchSeqRecognizer.train"><code class="docutils literal notranslate"><span class="pre">TorchSeqRecognizer.train</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.lib.models.load_any"><code class="docutils literal notranslate"><span class="pre">load_any()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-lib-segmentation-module">kraken.lib.segmentation module</a><ul>
<li><a class="reference internal" href="#kraken.lib.segmentation.reading_order"><code class="docutils literal notranslate"><span class="pre">reading_order()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.neural_reading_order"><code class="docutils literal notranslate"><span class="pre">neural_reading_order()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.polygonal_reading_order"><code class="docutils literal notranslate"><span class="pre">polygonal_reading_order()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.vectorize_lines"><code class="docutils literal notranslate"><span class="pre">vectorize_lines()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.calculate_polygonal_environment"><code class="docutils literal notranslate"><span class="pre">calculate_polygonal_environment()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.scale_polygonal_lines"><code class="docutils literal notranslate"><span class="pre">scale_polygonal_lines()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.scale_regions"><code class="docutils literal notranslate"><span class="pre">scale_regions()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.compute_polygon_section"><code class="docutils literal notranslate"><span class="pre">compute_polygon_section()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.segmentation.extract_polygons"><code class="docutils literal notranslate"><span class="pre">extract_polygons()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-lib-vgsl-module">kraken.lib.vgsl module</a><ul>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.input"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.input</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.nn"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.nn</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.criterion"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.criterion</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.user_metadata"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.user_metadata</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.one_channel_mode"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.one_channel_mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.add_codec"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.add_codec()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.append"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.append()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.aux_layers"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.aux_layers</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_addition"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_addition()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_conv"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_conv()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_dropout"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_dropout()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_groupnorm"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_groupnorm()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_identity"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_identity()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_maxpool"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_maxpool()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_output"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_output()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_parallel"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_parallel()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_reshape"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_reshape()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_rnn"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_rnn()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_ro"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_ro()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_series"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_series()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.build_wav2vec2"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.build_wav2vec2()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.codec"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.codec</span></code></a></li>
<li><a class="reference internal" href="#id43"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.criterion</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.eval"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.eval()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.hyper_params"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.hyper_params</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.idx"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.idx</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.init_weights"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.init_weights()</span></code></a></li>
<li><a class="reference internal" href="#id44"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.input</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.load_model"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.load_model()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.model_type"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.model_type</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.named_spec"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.named_spec</span></code></a></li>
<li><a class="reference internal" href="#id45"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.nn</span></code></a></li>
<li><a class="reference internal" href="#id46"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.one_channel_mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.ops"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.ops</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.resize_output"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.resize_output()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.save_model"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.save_model()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.seg_type"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.seg_type</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.set_num_threads"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.set_num_threads()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.spec"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.spec</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.to"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.to()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.train"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.train()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.vgsl.TorchVGSLModel.use_legacy_polygons"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.use_legacy_polygons</span></code></a></li>
<li><a class="reference internal" href="#id47"><code class="docutils literal notranslate"><span class="pre">TorchVGSLModel.user_metadata</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-lib-xml-module">kraken.lib.xml module</a><ul>
<li><a class="reference internal" href="#kraken.lib.xml.XMLPage"><code class="docutils literal notranslate"><span class="pre">XMLPage</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#training">Training</a><ul>
<li><a class="reference internal" href="#kraken-lib-train-module">kraken.lib.train module</a></li>
<li><a class="reference internal" href="#loss-and-evaluation-functions">Loss and Evaluation Functions</a></li>
<li><a class="reference internal" href="#trainer">Trainer</a><ul>
<li><a class="reference internal" href="#kraken.lib.train.KrakenTrainer"><code class="docutils literal notranslate"><span class="pre">KrakenTrainer</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.train.KrakenTrainer.automatic_optimization"><code class="docutils literal notranslate"><span class="pre">KrakenTrainer.automatic_optimization</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.train.KrakenTrainer.fit"><code class="docutils literal notranslate"><span class="pre">KrakenTrainer.fit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-lib-dataset-module">kraken.lib.dataset module</a><ul>
<li><a class="reference internal" href="#recognition-datasets">Recognition datasets</a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.add"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.add()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.alphabet"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.alphabet</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.arrow_table"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.arrow_table</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.aug"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.aug</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.codec"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.codec</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.encode"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.encode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.failed_samples"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.failed_samples</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.im_mode"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.im_mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.legacy_polygons_status"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.legacy_polygons_status</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.no_encode"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.no_encode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.rebuild_alphabet"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.rebuild_alphabet()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.seg_type"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.seg_type</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.skip_empty_lines"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.skip_empty_lines</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.text_transforms"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.text_transforms</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ArrowIPCRecognitionDataset.transforms"><code class="docutils literal notranslate"><span class="pre">ArrowIPCRecognitionDataset.transforms</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet"><code class="docutils literal notranslate"><span class="pre">BaselineSet</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.add"><code class="docutils literal notranslate"><span class="pre">BaselineSet.add()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.aug"><code class="docutils literal notranslate"><span class="pre">BaselineSet.aug</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.class_stats"><code class="docutils literal notranslate"><span class="pre">BaselineSet.class_stats</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.failed_samples"><code class="docutils literal notranslate"><span class="pre">BaselineSet.failed_samples</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.im_mode"><code class="docutils literal notranslate"><span class="pre">BaselineSet.im_mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.imgs"><code class="docutils literal notranslate"><span class="pre">BaselineSet.imgs</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.line_width"><code class="docutils literal notranslate"><span class="pre">BaselineSet.line_width</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.mbl_dict"><code class="docutils literal notranslate"><span class="pre">BaselineSet.mbl_dict</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.merge_all_baselines"><code class="docutils literal notranslate"><span class="pre">BaselineSet.merge_all_baselines</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.merge_all_regions"><code class="docutils literal notranslate"><span class="pre">BaselineSet.merge_all_regions</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.mreg_dict"><code class="docutils literal notranslate"><span class="pre">BaselineSet.mreg_dict</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.pad"><code class="docutils literal notranslate"><span class="pre">BaselineSet.pad</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.seg_type"><code class="docutils literal notranslate"><span class="pre">BaselineSet.seg_type</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.targets"><code class="docutils literal notranslate"><span class="pre">BaselineSet.targets</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.transform"><code class="docutils literal notranslate"><span class="pre">BaselineSet.transform()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.transforms"><code class="docutils literal notranslate"><span class="pre">BaselineSet.transforms</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.valid_baselines"><code class="docutils literal notranslate"><span class="pre">BaselineSet.valid_baselines</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.BaselineSet.valid_regions"><code class="docutils literal notranslate"><span class="pre">BaselineSet.valid_regions</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.add"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.add()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.add_line"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.add_line()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.add_page"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.add_page()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.alphabet"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.alphabet</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.aug"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.aug</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.encode"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.encode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.failed_samples"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.failed_samples</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.im_mode"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.im_mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.no_encode"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.no_encode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.seg_type"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.seg_type</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.skip_empty_lines"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.skip_empty_lines</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.text_transforms"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.text_transforms</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.GroundTruthDataset.transforms"><code class="docutils literal notranslate"><span class="pre">GroundTruthDataset.transforms</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#segmentation-datasets">Segmentation datasets</a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.add"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.add()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.add_line"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.add_line()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.add_page"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.add_page()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.alphabet"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.alphabet</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.aug"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.aug</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.encode"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.encode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.failed_samples"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.failed_samples</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.im_mode"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.im_mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.legacy_polygons"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.legacy_polygons</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.no_encode"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.no_encode()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.seg_type"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.seg_type</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.skip_empty_lines"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.skip_empty_lines</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.text_transforms"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.text_transforms</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PolygonGTDataset.transforms"><code class="docutils literal notranslate"><span class="pre">PolygonGTDataset.transforms</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#reading-order-datasets">Reading order datasets</a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.PairWiseROSet"><code class="docutils literal notranslate"><span class="pre">PairWiseROSet</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.PairWiseROSet.data"><code class="docutils literal notranslate"><span class="pre">PairWiseROSet.data</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PairWiseROSet.failed_samples"><code class="docutils literal notranslate"><span class="pre">PairWiseROSet.failed_samples</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PairWiseROSet.get_feature_dim"><code class="docutils literal notranslate"><span class="pre">PairWiseROSet.get_feature_dim()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PairWiseROSet.m_dict"><code class="docutils literal notranslate"><span class="pre">PairWiseROSet.m_dict</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PairWiseROSet.merge_all_entities"><code class="docutils literal notranslate"><span class="pre">PairWiseROSet.merge_all_entities</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PairWiseROSet.valid_entities"><code class="docutils literal notranslate"><span class="pre">PairWiseROSet.valid_entities</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.lib.dataset.PageWiseROSet"><code class="docutils literal notranslate"><span class="pre">PageWiseROSet</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.PageWiseROSet.data"><code class="docutils literal notranslate"><span class="pre">PageWiseROSet.data</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PageWiseROSet.failed_samples"><code class="docutils literal notranslate"><span class="pre">PageWiseROSet.failed_samples</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PageWiseROSet.get_feature_dim"><code class="docutils literal notranslate"><span class="pre">PageWiseROSet.get_feature_dim()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PageWiseROSet.m_dict"><code class="docutils literal notranslate"><span class="pre">PageWiseROSet.m_dict</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PageWiseROSet.merge_all_entities"><code class="docutils literal notranslate"><span class="pre">PageWiseROSet.merge_all_entities</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.PageWiseROSet.valid_entities"><code class="docutils literal notranslate"><span class="pre">PageWiseROSet.valid_entities</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#helpers">Helpers</a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms</span></code></a><ul>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.batch"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.batch</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.centerline_norm"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.centerline_norm</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.channels"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.channels</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.force_binarization"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.force_binarization</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.height"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.height</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.mode"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.mode</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.pad"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.pad</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.scale"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.scale</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.valid_norm"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.valid_norm</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.ImageInputTransforms.width"><code class="docutils literal notranslate"><span class="pre">ImageInputTransforms.width</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken.lib.dataset.collate_sequences"><code class="docutils literal notranslate"><span class="pre">collate_sequences()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.global_align"><code class="docutils literal notranslate"><span class="pre">global_align()</span></code></a></li>
<li><a class="reference internal" href="#kraken.lib.dataset.compute_confusions"><code class="docutils literal notranslate"><span class="pre">compute_confusions()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#legacy-modules">Legacy modules</a><ul>
<li><a class="reference internal" href="#kraken-binarization-module">kraken.binarization module</a><ul>
<li><a class="reference internal" href="#kraken.binarization.nlbin"><code class="docutils literal notranslate"><span class="pre">nlbin()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#kraken-transcribe-module">kraken.transcribe module</a></li>
<li><a class="reference internal" href="#kraken-linegen-module">kraken.linegen module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="training/ketos.html" title="previous chapter">Training</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
<h3>Versions</h3>
<ul>
  <li><a href="../2.0.0/index.html">2.0.0</a></li>
  <li><a href="../3.0/api_docs.html">3.0</a></li>
  <li><a href="../4.0/api_docs.html">4.0</a></li>
  <li><a href="../4.1/api_docs.html">4.1</a></li>
  <li><a href="../4.2.0/api_docs.html">4.2.0</a></li>
  <li><a href="../4.3.0/api_docs.html">4.3.0</a></li>
  <li><a href="../5.0.0/api_docs.html">5.0.0</a></li>
  <li><a href="../5.2/api_docs.html">5.2</a></li>
  <li><a href="../5.3.0/api_docs.html">5.3.0</a></li>
  <li><a href="api_docs.html">6.0.0</a></li>
  <li><a href="../main/api_docs.html">main</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2015-2025, Benjamin Kiessling.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/api_docs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>