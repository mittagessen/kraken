<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Models &#8212; kraken  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=89a84cc7" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="kraken.re/models.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="kraken API" href="api.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="models">
<span id="id1"></span><h1>Models<a class="headerlink" href="#models" title="Link to this heading">¶</a></h1>
<p>There are currently three kinds of models containing the recurrent neural
networks doing all the character recognition supported by kraken: <code class="docutils literal notranslate"><span class="pre">pronn</span></code>
files serializing old pickled <code class="docutils literal notranslate"><span class="pre">pyrnn</span></code> models as protobuf, clstm’s native
serialization, and versatile <a class="reference external" href="https://developer.apple.com/documentation/coreml">Core ML</a> models.</p>
<section id="pyrnn">
<span id="id2"></span><h2>pyrnn<a class="headerlink" href="#pyrnn" title="Link to this heading">¶</a></h2>
<p>These are serialized instances of python <code class="docutils literal notranslate"><span class="pre">lstm.SeqRecognizer</span></code> objects. Using
such a model just entails loading the pickle and calling the appropriate
functions to perform recognition much like a shared library in other
programming languages.</p>
<p>Support for these models has been dropped with kraken 1.0 as python 2.7 is
phased out.</p>
</section>
<section id="pronn">
<h2>pronn<a class="headerlink" href="#pronn" title="Link to this heading">¶</a></h2>
<p>Legacy python models can be converted to a protobuf based serialization. These
are loadable by kraken 1.0 and will be automatically converted to Core ML.</p>
<p>Protobuf models have several advantages over pickled ones. They are noticeably
smaller (80Mb vs 1.8Mb for the default model), don’t allow arbitrary code
execution, and are upward compatible with python 3. Because they are so much
more lightweight they are also loaded much faster.</p>
</section>
<section id="clstm">
<h2>clstm<a class="headerlink" href="#clstm" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://github.com/tmbdev/clstm">clstm</a>, a small and fast implementation of
LSTM networks that was used in previous kraken versions. The model files can be
loaded with pytorch-based kraken and will be converted to Core ML.</p>
</section>
<section id="coreml">
<h2>CoreML<a class="headerlink" href="#coreml" title="Link to this heading">¶</a></h2>
<p>Core ML allows arbitrary network architectures in a compact serialization with
metadata. This is the default format in pytorch-based kraken.</p>
</section>
<section id="conversion">
<h2>Conversion<a class="headerlink" href="#conversion" title="Link to this heading">¶</a></h2>
<p>Per default pronn/clstm models are automatically converted to the new Core ML
format when explicitely defined using the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option to the <code class="docutils literal notranslate"><span class="pre">ocr</span></code> utility
on the command line. They are stored in the user kraken directory (default is
~/.kraken) and will be automatically substituted in future runs.</p>
<p>If conversion is not desired, e.g. because there is a bug in the conversion
routine, it can be disabled using the <code class="docutils literal notranslate"><span class="pre">--disable-autoconversion</span></code> switch.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/kraken.png" alt="Logo of kraken"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Models</a><ul>
<li><a class="reference internal" href="#pyrnn">pyrnn</a></li>
<li><a class="reference internal" href="#pronn">pronn</a></li>
<li><a class="reference internal" href="#clstm">clstm</a></li>
<li><a class="reference internal" href="#coreml">CoreML</a></li>
<li><a class="reference internal" href="#conversion">Conversion</a></li>
</ul>
</li>
</ul>

  </div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="api.html" title="previous chapter">kraken API</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
<h3>Versions</h3>
<ul>
  <li><a href="models.html">2.0.0</a></li>
  <li><a href="../3.0/models.html">3.0</a></li>
  <li><a href="../4.0/models.html">4.0</a></li>
  <li><a href="../4.1/models.html">4.1</a></li>
  <li><a href="../4.2.0/models.html">4.2.0</a></li>
  <li><a href="../4.3.0/models.html">4.3.0</a></li>
  <li><a href="../5.0.0/models.html">5.0.0</a></li>
  <li><a href="../5.1/models.html">5.1</a></li>
  <li><a href="../5.2/models.html">5.2</a></li>
  <li><a href="../5.3.0/models.html">5.3.0</a></li>
  <li><a href="../6.0.0/index.html">6.0.0</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2015-2026, Benjamin Kiessling.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/models.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>